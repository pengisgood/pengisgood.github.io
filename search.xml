<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[å¼€å‘äººå‘˜å¸¸ç”¨çš„å›½å†…é•œåƒä»“åº“]]></title>
    <url>%2F2020%2F09%2Fawesome-mirrors%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä¸ŽGitHubä»“åº“ä¿æŒåŒæ­¥ã€‚ ç”±äºŽä¼—æ‰€å‘¨çŸ¥çš„åŽŸå› ï¼Œä¸­å›½çš„å¼€å‘è€…åœ¨ä¸‹è½½å„ç§ä¾èµ–çš„æ—¶å€™é€Ÿåº¦éƒ½æ¯”è¾ƒæ…¢ã€‚å› æ­¤éƒ¨åˆ†æœ‰å®žåŠ›çš„é«˜æ ¡ã€å…¬å¸åœ¨å›½å†…æ­å»ºäº†æ–¹ä¾¿å¼€å‘è€…çš„å„ç§é•œåƒä»“åº“ï¼Œå¹¶ä¸”å‡ ä¹Žéƒ½æ˜¯å’Œå›½å¤–çš„æºå®šæ—¶åŒæ­¥çš„ã€‚æœ¬ä»“åº“ä¸»è¦æ”¶é›†æ–¹ä¾¿ä¸­å›½å¼€å‘è€…æé€Ÿçš„æºï¼Œä»¥åŠé…ç½®çš„æ–¹å¼ã€‚ ä¸‹é¢çš„æ“ä½œæ–¹å¼åœ¨ä¸åŒçš„ç³»ç»Ÿå¯èƒ½ä¼šæœ‰ç»†å¾®çš„å·®åˆ«ï¼Œæ¬¢è¿Žå¤§å®¶è¡¥å……å’Œçº æ­£ã€‚ ç›®å½• Docker Nodejs Python Java Goproxy Ruby Alpine apk Centos yum Debian apt Ubuntu apt Homebrew iOS Dockeré¦–å…ˆä»Žç½‘ä¸Šæœç´¢å›½å†…çš„docker registryæºï¼Œç„¶åŽä¿®æ”¹dockerçš„é…ç½®å¹¶é‡å¯dockerã€‚åœ¨è¿™é‡Œæˆ‘æ¯”è¾ƒæŽ¨èä½¿ç”¨å…è´¹çš„é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨ï¼ˆè‡³å°‘æˆªè‡³2020å¹´09æœˆ03æ—¥è¿˜æ˜¯å…è´¹çš„ï¼‰ï¼Œç›®å‰ä½¿ç”¨ä¸€ç›´æ¯”è¾ƒå¹³ç¨³ã€‚ èŽ·å–é•œåƒåŠ é€Ÿurl æ³¨å†Œä¸€ä¸ªé˜¿é‡Œäº‘è´¦å·å¹¶ç™»å½•ï¼Œåœ¨äº§å“ä¸ŽæœåŠ¡ä¸­æœç´¢å®¹å™¨é•œåƒæœåŠ¡ï¼Œè·Ÿéšå¼•å¯¼å®Œæˆå¿…è¦çš„ä¸€äº›æ­¥éª¤ï¼Œç„¶åŽæ¥åˆ°è¿™ä¸ªé¡µé¢ï¼Œå°±å¯ä»¥çœ‹åˆ°è‡ªå·±ä¸“æœ‰çš„åŠ é€Ÿå™¨åœ°å€äº†ã€‚ ç»™dockerå®¢æˆ·ç«¯é…ç½®é•œåƒåŠ é€Ÿå™¨ è¿™é‡Œä»¥MacOSä¸ºä¾‹ï¼Œå…¶ä»–ç³»ç»Ÿç±»ä¼¼ã€‚å¦‚æžœæ²¡æœ‰/etc/docker/daemon.jsonæ–‡ä»¶ï¼Œåˆ™å¯ä»¥ç›´æŽ¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å®Œæˆé…ç½®ï¼›å¦‚æžœè¯¥æ–‡ä»¶å·²ç»å­˜åœ¨äº†ï¼Œåˆ™é€‰æ‹©è‡ªå·±ç†Ÿæ‚‰çš„æ–‡æœ¬ç¼–è¾‘å™¨ç¼–è¾‘è¯¥æ–‡ä»¶ï¼Œæ·»åŠ åŠ é€Ÿå™¨åœ°å€çš„é…ç½®ã€‚å¦‚æžœä½ ä½¿ç”¨çš„å¸¦ç•Œé¢çš„å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥åœ¨Preferences... -&gt; Docker Engineæ˜¾ç¤ºçš„ç¼–è¾‘å™¨ä¸­æ·»åŠ ç›¸åº”çš„é…ç½®ã€‚ 123456sudo mkdir -p /etc/dockersudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'&#123; "registry-mirrors": ["https://xxx.mirror.aliyuncs.com"]&#125;EOF æ³¨æ„ï¼šå°†https://xxx.mirror.aliyuncs.comæ›¿æ¢æˆä½ è‡ªå·±çš„é•œåƒåŠ é€Ÿå™¨åœ°å€ã€‚å†æ¬¡æé†’ï¼Œé…ç½®å®ŒæˆåŽï¼Œé‡å¯dockerä¹‹åŽæ‰ä¼šç”Ÿæ•ˆã€‚ é™¤äº†é˜¿é‡Œäº‘çš„æºï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æºå¯ä»¥å‚è€ƒï¼š https://registry.docker-cn.com http://hub-mirror.c.163.com http://docker.mirrors.ustc.edu.cn http://mirror.azure.cn/help/docker-registry-proxy-cache.html Nodejsä¸‹é¢æ˜¯NPMçš„é…ç½®æ–¹å¼ï¼Œä»¥æ·˜å®çš„æºä¸ºä¾‹ã€‚ ä¸´æ—¶ä½¿ç”¨ 12345678# ä¸ºå•ç”¨æˆ·å®‰è£…npm install --registry https://registry.npm.taobao.org &lt;package-name&gt;#ä¸ºæ‰€æœ‰ç”¨æˆ·å®‰è£…npm install --global --registry https://registry.npm.taobao.org &lt;package-name&gt;# yarnyarn save &lt;package-name&gt; --registry https://registry.npm.taobao.org é»˜è®¤ä½¿ç”¨ 12345# npmnpm set registry https://registry.npm.taobao.org# yarnyarn config set registry https://registry.npm.taobao.org é™¤äº†æ·˜å®çš„æºï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æºå¯ä»¥å‚è€ƒï¼š http://crproxy.trafficmanager.net:4873 å¦å¤–ï¼Œå¯ä»¥é€šè¿‡nrmç®¡ç†å¤šä¸ªNPMçš„æºï¼Œç›¸åº”çš„yarnä¹Ÿæœ‰yrmã€‚ PythonPyPI (Python Package Index) æ˜¯ Python ç¼–ç¨‹è¯­è¨€çš„è½¯ä»¶å­˜å‚¨åº“ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡ PyPI æŸ¥æ‰¾å’Œå®‰è£…ç”± Python ç¤¾åŒºå¼€å‘å’Œå…±äº«çš„è½¯ä»¶ï¼Œä¹Ÿå¯ä»¥å°†è‡ªå·±å¼€å‘çš„åº“ä¸Šä¼ è‡³ PyPI ã€‚è¿™é‡Œä»¥é˜¿é‡Œäº‘çš„æºä¸ºä¾‹ã€‚ ä¸´æ—¶ä½¿ç”¨ 1pip install -i https://mirrors.aliyun.com/pypi/simple &lt;package-name&gt; æ³¨æ„ï¼Œsimple ä¸èƒ½å°‘, æ˜¯ https è€Œä¸æ˜¯ http é»˜è®¤ä½¿ç”¨ å‡çº§ pip åˆ°æœ€æ–°çš„ç‰ˆæœ¬ (&gt;=10.0.0) åŽè¿›è¡Œé…ç½®ï¼š 12pip install pip -Upip config set global.index-url https://mirrors.aliyun.com/pypi/simple é™¤äº†é˜¿é‡Œäº‘çš„æºï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æºå¯ä»¥å‚è€ƒï¼š https://pypi.tuna.tsinghua.edu.cn/simple https://pypi.mirrors.ustc.edu.cn/simple https://pypi.douban.com/simple http://mirror.azure.cn/pypi/simple Anacondaçš„é…ç½®æ–¹å¼å¯ä»¥å‚è€ƒæ¸…åŽå¤§å­¦çš„Anacondaé•œåƒä½¿ç”¨å¸®åŠ© Java Maven é…ç½® æ‰“å¼€ Maven çš„é…ç½®æ–‡ä»¶(windowsæœºå™¨ä¸€èˆ¬åœ¨mavenå®‰è£…ç›®å½•çš„conf/settings.xml)ï¼Œåœ¨&lt;mirrors&gt;&lt;/mirrors&gt;æ ‡ç­¾ä¸­æ·»åŠ  mirror å­èŠ‚ç‚¹: 123456&lt;mirror&gt; &lt;id&gt;aliyunmaven&lt;/id&gt; &lt;mirrorOf&gt;*&lt;/mirrorOf&gt; &lt;name&gt;é˜¿é‡Œäº‘å…¬å…±ä»“åº“&lt;/name&gt; &lt;url&gt;https://maven.aliyun.com/repository/public&lt;/url&gt;&lt;/mirror&gt; å¦‚æžœæƒ³ä½¿ç”¨å…¶å®ƒä»£ç†ä»“åº“,å¯åœ¨&lt;repositories&gt;&lt;/repositories&gt;èŠ‚ç‚¹ä¸­åŠ å…¥å¯¹åº”çš„ä»“åº“ä½¿ç”¨åœ°å€ã€‚ä»¥ä½¿ç”¨springä»£ç†ä»“ä¸ºä¾‹ï¼š 12345678910&lt;repository&gt; &lt;id&gt;spring&lt;/id&gt; &lt;url&gt;https://maven.aliyun.com/repository/spring&lt;/url&gt; &lt;releases&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/releases&gt; &lt;snapshots&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/snapshots&gt;&lt;/repository&gt; gradle é…ç½® åœ¨ build.gradle æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç : 1234567allprojects &#123; repositories &#123; maven &#123; url 'https://maven.aliyun.com/repository/public/' &#125; mavenLocal() mavenCentral() &#125;&#125; å¦‚æžœæƒ³ä½¿ç”¨ maven.aliyun.com æä¾›çš„å…¶å®ƒä»£ç†ä»“ï¼Œä»¥ä½¿ç”¨ spring ä»“ä¸ºä¾‹ï¼Œä»£ç å¦‚ä¸‹: 12345678allprojects &#123; repositories &#123; maven &#123; url 'https://maven.aliyun.com/repository/public/' &#125; maven &#123; url 'https://maven.aliyun.com/repository/spring/'&#125; mavenLocal() mavenCentral() &#125;&#125; é™¤äº†Springçš„ä»“åº“ä¹‹å¤–ï¼Œé˜¿é‡Œäº‘è¿˜æä¾›ä¸€äº›å…¶ä»–çš„æºï¼š central https://maven.aliyun.com/repository/central jcenter https://maven.aliyun.com/repository/public public https://maven.aliyun.com/repository/public google https://maven.aliyun.com/repository/google gradle-plugin https://maven.aliyun.com/repository/gradle-plugin spring https://maven.aliyun.com/repository/spring spring-plugin https://maven.aliyun.com/repository/spring-plugin grails-core https://maven.aliyun.com/repository/grails-core apache snapshots https://maven.aliyun.com/repository/apache-snapshots Goproxyä½¿ç”¨go1.11ä»¥ä¸Šç‰ˆæœ¬å¹¶å¼€å¯go moduleæœºåˆ¶ï¼Œä¸‹é¢ä»¥é˜¿é‡Œäº‘çš„æºä¸ºä¾‹ï¼š 12export GO111MODULE=onexport GOPROXY=https://mirrors.aliyun.com/goproxy é™¤äº†é˜¿é‡Œäº‘çš„æºï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æºå¯ä»¥å‚è€ƒï¼š https://goproxy.cn https://goproxy.io Rubyè¿™é‡Œä»¥é…ç½®Ruby Chinaçš„æºä¸ºä¾‹ï¼š 1gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/ Bundlerç”¨æˆ·å‚è€ƒå¦‚ä¸‹é…ç½®ï¼š 1bundle config mirror.https://rubygems.org https://gems.ruby-china.com è¿™æ ·ä½ ä¸ç”¨æ”¹ä½ çš„Gemfileçš„sourceã€‚ 123source &apos;https://rubygems.org/&apos;gem &apos;rails&apos;, &apos;4.2.5&apos;... é™¤äº†Ruby Chinaçš„æºï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æºå¯ä»¥å‚è€ƒï¼š https://mirrors.aliyun.com/rubygems https://mirrors.tuna.tsinghua.edu.cn/rubygems https://mirrors.ustc.edu.cn/rubygems http://mirror.azure.cn/rubygems Alpine apkAlpine Linux æ˜¯ä¸€ä¸ªé¢å‘å®‰å…¨ï¼Œè½»é‡çº§çš„åŸºäºŽmusl libcä¸Žbusyboxé¡¹ç›®çš„Linuxå‘è¡Œç‰ˆã€‚ ä¸‹é¢ä»¥é…ç½®é˜¿é‡Œäº‘çš„æºä½œä¸ºä¾‹å­ï¼š 1sed -i 's/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g' /etc/apk/repositories é™¤äº†é˜¿é‡Œäº‘çš„æºï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æºå¯ä»¥å‚è€ƒï¼š dl-cdn.alpinelinux.org/mirrors.tuna.tsinghua.edu.cn Centos yumCentOSï¼Œæ˜¯åŸºäºŽ Red Hat Linux æä¾›çš„å¯è‡ªç”±ä½¿ç”¨æºä»£ç çš„ä¼ä¸šçº§ Linux å‘è¡Œç‰ˆæœ¬ï¼›æ˜¯ä¸€ä¸ªç¨³å®šï¼Œå¯é¢„æµ‹ï¼Œå¯ç®¡ç†å’Œå¯å¤åˆ¶çš„å…è´¹ä¼ä¸šçº§è®¡ç®—å¹³å°ã€‚ æ›´æ¢æºä¹‹å‰ï¼Œå»ºè®®å…ˆå¤‡ä»½ä¸€ä¸‹ï¼Œä¸‹é¢ä»¥é˜¿é‡Œäº‘çš„æºä¸ºä¾‹ï¼š 1mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup ä¸‹è½½é˜¿é‡Œäº‘çš„æºï¼š 123456# Centos 6curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-6.repo# Centos 7curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo# Centos 8curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-8.repo ç”Ÿæˆç¼“å­˜ï¼š 1yum makecache æ³¨æ„ï¼š éžé˜¿é‡Œäº‘ECSç”¨æˆ·ä¼šå‡ºçŽ° Couldn&#39;t resolve host &#39;mirrors.cloud.aliyuncs.com&#39;ä¿¡æ¯ï¼Œä¸å½±å“ä½¿ç”¨ã€‚ç”¨æˆ·ä¹Ÿå¯è‡ªè¡Œä¿®æ”¹ç›¸å…³é…ç½®ï¼š 1sed -i -e '/mirrors.cloud.aliyuncs.com/d' -e '/mirrors.aliyuncs.com/d' /etc/yum.repos.d/CentOS-Base.repo é™¤äº†é˜¿é‡Œäº‘çš„æºï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æºå¯ä»¥å‚è€ƒï¼š https://mirrors.tuna.tsinghua.edu.cn/help/centos http://mirrors.ustc.edu.cn/help/centos.html http://mirror.azure.cn/help/centos.html Debian aptDebian GNU/Linux ï¼Œæ˜¯ä¸€ä¸ªæ“ä½œç³»ç»ŸåŠè‡ªç”±è½¯ä»¶çš„å‘è¡Œç‰ˆï¼Œç”±ä¸€ç¾¤è‡ªæ„¿ä»˜å‡ºæ—¶é—´å’Œç²¾åŠ›çš„ç”¨æˆ·æ¥ç»´æŠ¤å¹¶æ›´æ–°ã€‚å®ƒé™„å¸¦äº†è¶…è¿‡ 59000 ä¸ªè½¯ä»¶åŒ…ï¼Œè¿™äº›é¢„å…ˆç¼–è¯‘å¥½çš„è½¯ä»¶è¢«æ‰“åŒ…æˆä¸€ç§è‰¯å¥½çš„æ ¼å¼ä»¥ä¾¿äºŽç”¨æˆ·å®‰è£…å’Œä½¿ç”¨ã€‚ ä¸‹é¢ä»¥é˜¿é‡Œäº‘çš„æºä¸ºä¾‹ï¼š debian 7.x (wheezy) ç¼–è¾‘/etc/apt/sources.listæ–‡ä»¶(éœ€è¦ä½¿ç”¨sudo), åœ¨æ–‡ä»¶æœ€å‰é¢æ·»åŠ ä»¥ä¸‹æ¡ç›®(æ“ä½œå‰è¯·åšå¥½ç›¸åº”å¤‡ä»½) 1234deb http://mirrors.aliyun.com/debian/ wheezy main non-free contribdeb http://mirrors.aliyun.com/debian/ wheezy-proposed-updates main non-free contribdeb-src http://mirrors.aliyun.com/debian/ wheezy main non-free contribdeb-src http://mirrors.aliyun.com/debian/ wheezy-proposed-updates main non-free contrib debian 8.x (jessie) ç¼–è¾‘/etc/apt/sources.listæ–‡ä»¶(éœ€è¦ä½¿ç”¨sudo), åœ¨æ–‡ä»¶æœ€å‰é¢æ·»åŠ ä»¥ä¸‹æ¡ç›®(æ“ä½œå‰è¯·åšå¥½ç›¸åº”å¤‡ä»½) 1234deb http://mirrors.aliyun.com/debian/ jessie main non-free contribdeb http://mirrors.aliyun.com/debian/ jessie-proposed-updates main non-free contribdeb-src http://mirrors.aliyun.com/debian/ jessie main non-free contribdeb-src http://mirrors.aliyun.com/debian/ jessie-proposed-updates main non-free contrib debian 9.x (stretch) ç¼–è¾‘/etc/apt/sources.listæ–‡ä»¶(éœ€è¦ä½¿ç”¨sudo), åœ¨æ–‡ä»¶æœ€å‰é¢æ·»åŠ ä»¥ä¸‹æ¡ç›®(æ“ä½œå‰è¯·åšå¥½ç›¸åº”å¤‡ä»½) 12345678deb http://mirrors.aliyun.com/debian/ stretch main non-free contribdeb-src http://mirrors.aliyun.com/debian/ stretch main non-free contribdeb http://mirrors.aliyun.com/debian-security stretch/updates maindeb-src http://mirrors.aliyun.com/debian-security stretch/updates maindeb http://mirrors.aliyun.com/debian/ stretch-updates main non-free contribdeb-src http://mirrors.aliyun.com/debian/ stretch-updates main non-free contribdeb http://mirrors.aliyun.com/debian/ stretch-backports main non-free contribdeb-src http://mirrors.aliyun.com/debian/ stretch-backports main non-free contrib é™¤äº†é˜¿é‡Œäº‘çš„æºï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æºå¯ä»¥å‚è€ƒï¼š https://mirrors.tuna.tsinghua.edu.cn/help/debian http://mirrors.ustc.edu.cn/help/debian.html Ubuntu aptUbuntuï¼Œæ˜¯ä¸€æ¬¾åŸºäºŽ Debian Linux çš„ä»¥æ¡Œé¢åº”ç”¨ä¸ºä¸»çš„æ“ä½œç³»ç»Ÿï¼Œå†…å®¹æ¶µç›–æ–‡å­—å¤„ç†ã€ç”µå­é‚®ä»¶ã€è½¯ä»¶å¼€å‘å·¥å…·å’Œ Web æœåŠ¡ç­‰ï¼Œå¯ä¾›ç”¨æˆ·å…è´¹ä¸‹è½½ã€ä½¿ç”¨å’Œåˆ†äº«ã€‚ ä¸‹é¢ä»¥é˜¿é‡Œäº‘çš„æºä¸ºä¾‹ï¼š ç”¨ä½ ç†Ÿæ‚‰çš„ç¼–è¾‘å™¨æ‰“å¼€/etc/apt/sources.listï¼Œæ›¿æ¢é»˜è®¤çš„http://archive.ubuntu.com/ä¸ºmirrors.aliyun.comã€‚ ubuntu 16.04 é…ç½®å¦‚ä¸‹123456789101112131415deb http://mirrors.aliyun.com/ubuntu/ xenial maindeb-src http://mirrors.aliyun.com/ubuntu/ xenial maindeb http://mirrors.aliyun.com/ubuntu/ xenial-updates maindeb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates maindeb http://mirrors.aliyun.com/ubuntu/ xenial universedeb-src http://mirrors.aliyun.com/ubuntu/ xenial universedeb http://mirrors.aliyun.com/ubuntu/ xenial-updates universedeb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates universedeb http://mirrors.aliyun.com/ubuntu/ xenial-security maindeb-src http://mirrors.aliyun.com/ubuntu/ xenial-security maindeb http://mirrors.aliyun.com/ubuntu/ xenial-security universedeb-src http://mirrors.aliyun.com/ubuntu/ xenial-security universe ubuntu 18.04(bionic) é…ç½®å¦‚ä¸‹1234567891011121314deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse ubuntu 20.04(focal) é…ç½®å¦‚ä¸‹1234567891011121314deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse é™¤äº†é˜¿é‡Œäº‘çš„æºï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æºå¯ä»¥å‚è€ƒï¼š https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu http://mirrors.ustc.edu.cn/help/ubuntu.html http://mirror.azure.cn/help/ubuntu.html HomebrewHomebrew æ˜¯ä¸€æ¬¾è‡ªç”±åŠå¼€æ”¾æºä»£ç çš„è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿï¼Œç”¨ä»¥ç®€åŒ– macOS ç³»ç»Ÿä¸Šçš„è½¯ä»¶å®‰è£…è¿‡ç¨‹ã€‚å®ƒæ‹¥æœ‰å®‰è£…ã€å¸è½½ã€æ›´æ–°ã€æŸ¥çœ‹ã€æœç´¢ç­‰å¾ˆå¤šå®žç”¨çš„åŠŸèƒ½ï¼Œé€šè¿‡ç®€å•çš„ä¸€æ¡æŒ‡ä»¤ï¼Œå°±å¯ä»¥å®žçŽ°åŒ…ç®¡ç†ï¼Œååˆ†æ–¹ä¾¿å¿«æ·ã€‚ ä¸‹é¢ä»¥é˜¿é‡Œäº‘çš„æºä¸ºä¾‹ï¼š åç§° è¯´æ˜Ž brew Homebrew æºä»£ç ä»“åº“ homebrew-core Homebrew æ ¸å¿ƒæº homebrew-cask æä¾› macOS åº”ç”¨å’Œå¤§åž‹äºŒè¿›åˆ¶æ–‡ä»¶çš„å®‰è£… homebrew-bottles é¢„ç¼–è¯‘äºŒè¿›åˆ¶è½¯ä»¶åŒ… Bash ç»ˆç«¯é…ç½® 1234567891011# æ›¿æ¢brew.git:cd "$(brew --repo)"git remote set-url origin https://mirrors.aliyun.com/homebrew/brew.git# æ›¿æ¢homebrew-core.git:cd "$(brew --repo)/Library/Taps/homebrew/homebrew-core"git remote set-url origin https://mirrors.aliyun.com/homebrew/homebrew-core.git# åº”ç”¨ç”Ÿæ•ˆbrew update# æ›¿æ¢homebrew-bottles:echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.aliyun.com/homebrew/homebrew-bottles' &gt;&gt; ~/.bash_profilesource ~/.bash_profile æ¢å¤é»˜è®¤é…ç½® å‡ºäºŽæŸäº›åœºæ™¯, å¯èƒ½éœ€è¦å›žé€€åˆ°é»˜è®¤é…ç½®, ä½ å¯ä»¥é€šè¿‡ä¸‹è¿°æ–¹å¼å›žé€€åˆ°é»˜è®¤é…ç½®ã€‚ é¦–å…ˆæ‰§è¡Œä¸‹è¿°å‘½ä»¤: 123456# é‡ç½®brew.git:cd "$(brew --repo)"git remote set-url origin https://github.com/Homebrew/brew.git# é‡ç½®homebrew-core.git:cd "$(brew --repo)/Library/Taps/homebrew/homebrew-core"git remote set-url origin https://github.com/Homebrew/homebrew-core.git ç„¶åŽåˆ æŽ‰ HOMEBREW_BOTTLE_DOMAIN çŽ¯å¢ƒå˜é‡,å°†ä½ ç»ˆç«¯æ–‡ä»¶~/.bash_profileä¸­HOMEBREW_BOTTLE_DOMAINè¡Œåˆ æŽ‰, å¹¶æ‰§è¡Œsource ~/.bash_profileã€‚ é™¤äº†é˜¿é‡Œäº‘çš„æºï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æºå¯ä»¥å‚è€ƒï¼š https://mirrors.tuna.tsinghua.edu.cn/help/homebrew http://mirrors.ustc.edu.cn/help/brew.git.html iOSCocoaPods æ˜¯ä¸€ä¸ª Cocoa å’Œ Cocoa Touch æ¡†æž¶çš„ä¾èµ–ç®¡ç†å™¨ï¼Œå…·ä½“åŽŸç†å’Œ Homebrew æœ‰ç‚¹ç±»ä¼¼ï¼Œéƒ½æ˜¯ä»Ž GitHub ä¸‹è½½ç´¢å¼•ï¼Œç„¶åŽæ ¹æ®ç´¢å¼•ä¸‹è½½ä¾èµ–çš„æºä»£ç ã€‚ ä¸‹é¢ä»¥æ¸…åŽå¤§å­¦çš„æºä¸ºä¾‹ï¼š å¯¹äºŽæ—§ç‰ˆçš„ CocoaPods å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ä½¿ç”¨ tuna çš„é•œåƒï¼š 123$ pod repo remove master$ pod repo add master https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git$ pod repo update æ–°ç‰ˆçš„ CocoaPods ä¸å…è®¸ç”¨pod repo addç›´æŽ¥æ·»åŠ masteråº“äº†ï¼Œä½†æ˜¯ä¾ç„¶å¯ä»¥ï¼š 123$ cd ~/.cocoapods/repos $ pod repo remove master$ git clone https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git master æœ€åŽè¿›å…¥è‡ªå·±çš„å·¥ç¨‹ï¼Œåœ¨è‡ªå·±å·¥ç¨‹çš„podFileç¬¬ä¸€è¡ŒåŠ ä¸Šï¼š 1source &apos;https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git&apos; æ³¨æ„ï¼š ä»Ž1.7.2å¼€å§‹ï¼Œå·²ç»å®Œå…¨åˆ‡åˆ°CDNä¸Šäº†ã€‚1.8ä»¥ä¸Šç”šè‡³æŠŠCDNä½œä¸ºé»˜è®¤æºä½¿ç”¨ï¼Œåœ¨Podfileæœ€ä¸Šé¢æ·»åŠ å³å¯ã€‚ 1source &apos;https://cdn.cocoapods.org/&apos; é™¤äº†æ¸…åŽå¤§å­¦çš„æºï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æºå¯ä»¥å‚è€ƒï¼š https://gitclub.cn/CocoaPods/Specs.git http://git.oschina.net/akuandev/Specs.git]]></content>
  </entry>
  <entry>
    <title><![CDATA[åŠ é€ŸHyperledger Fabricçš„dockeré•œåƒæž„å»ºè¿‡ç¨‹]]></title>
    <url>%2F2020%2F08%2Fspeed-up-hyperledger-fabric-build-process%2F</url>
    <content type="text"><![CDATA[Hyperledger Fabric ä»Žv2.0å¼€å§‹ï¼Œå…¨é¢å°†dockeråŸºç¡€é•œåƒæ›¿æ¢æˆäº†ä½“ç§¯æ›´å°ã€æ½œåœ¨å®‰å…¨é£Žé™©æ›´å°‘ã€æ›´åŠ è½»é‡çš„Alpine Linuxï¼Œä»Žè€Œä½¿å¾—make dockerå‡ºæ¥çš„å„ç§é•œåƒçš„ä½“ç§¯å‡ ä¹Žéƒ½ç¼©å°ä¸ºåŽŸæ¥çš„ä¸€åŠï¼Œç¡®å®žèƒ½å¤ŸèŠ‚çœæ›´å¤šçš„ç¡¬ç›˜ç©ºé—´ã€‚ä½†æ˜¯ï¼Œç”±äºŽä¼—æ‰€å‘¨çŸ¥çš„åŽŸå› ï¼Œå¯¹äºŽç”Ÿåœ¨çº¢æ——ä¸‹ï¼Œé•¿åœ¨æ–°ä¸­å›½çš„ç¨‹åºå‘˜ä»¬ï¼Œç¬¬ä¸€æ¬¡åœ¨Fabricé¡¹ç›®ä¸‹æž„å»ºdockeré•œåƒæ—¶ï¼Œä¾ç„¶æ˜¯å¥‡æ…¢æ— æ¯”ï¼Œå±¡æ¬¡è¶…æ—¶ã€‚ é‚£ä¹ˆè¿™ä¸ªé—®é¢˜æ€Žä¹ˆè§£å†³å‘¢ï¼Ÿ åˆ†æžé€Ÿåº¦çš„ç“¶é¢ˆé¦–å…ˆé€šè¿‡åˆ†æžé€Ÿåº¦æ…¢çš„åŽŸå› ï¼Œæ‰¾å‡ºå¯ä»¥ä¼˜åŒ–çš„ç‚¹ã€‚é€šè¿‡åˆ†æžmake dockerå‘½ä»¤ï¼Œå¤§æ¦‚è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼šé¦–å…ˆæ˜¯dockerä¼šä»Ždocker registry pull Alpineä½œä¸ºåŸºç¡€é•œåƒï¼Œç„¶åŽä½¿ç”¨apk add --no-cache xxxå®‰è£…ä¸€äº›è½¯ä»¶ï¼Œæœ€åŽé€šè¿‡makeå‘½ä»¤buildå‡ºPeerã€Orderä»¥åŠå…¶ä»–çš„toolsçš„äºŒè¿›åˆ¶åŒ…ã€‚åˆ°è¿™é‡Œç›¸ä¿¡å›½å†…çš„å„ç§å¥‡äººä¹‰å£«å·²ç»ç£¨åˆ€éœéœï¼Œè¿«ä¸åŠå¾…çš„å¼€å§‹æ›¿æ¢å„ç§å›½å†…çš„mirroräº†ã€‚ ä¸‹é¢çš„å„ç§èµ„æºéƒ½æ¥æºäºŽç½‘ä¸Šå„ä½å¥½å¿ƒäººçš„åˆ†äº«ã€‚ åŠ é€Ÿdocker pullè¿‡ç¨‹é¦–å…ˆä»Žç½‘ä¸Šæœç´¢å›½å†…çš„docker registryæºï¼Œç„¶åŽä¿®æ”¹dockerçš„é…ç½®å¹¶é‡å¯dockerã€‚åœ¨è¿™é‡Œæˆ‘æ¯”è¾ƒæŽ¨èä½¿ç”¨è‡ªå·±ä¸“æœ‰çš„å…è´¹çš„é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨ï¼Œç›®å‰ä½¿ç”¨ä¸€ç›´æ¯”è¾ƒå¹³ç¨³ã€‚ èŽ·å–é•œåƒåŠ é€Ÿurl æ³¨å†Œä¸€ä¸ªé˜¿é‡Œäº‘è´¦å·å¹¶ç™»å½•ï¼Œåœ¨äº§å“ä¸ŽæœåŠ¡ä¸­æœç´¢å®¹å™¨é•œåƒæœåŠ¡ï¼Œè·Ÿéšå¼•å¯¼å®Œæˆå¿…è¦çš„ä¸€äº›æ­¥éª¤ï¼Œç„¶åŽæ¥åˆ°è¿™ä¸ªé¡µé¢ï¼šhttps://cr.console.aliyun.com/cn-hangzhou/instances/mirrorsï¼Œå°±å¯ä»¥çœ‹åˆ°è‡ªå·±ä¸“æœ‰çš„åŠ é€Ÿå™¨åœ°å€äº†ã€‚ ç»™dockerå®¢æˆ·ç«¯é…ç½®é•œåƒåŠ é€Ÿå™¨ å¦‚æžœæ²¡æœ‰/etc/docker/daemon.jsonæ–‡ä»¶ï¼Œåˆ™å¯ä»¥ç›´æŽ¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å®Œæˆé…ç½®ï¼›å¦‚æžœè¯¥æ–‡ä»¶å·²ç»å­˜åœ¨äº†ï¼Œåˆ™é€‰æ‹©è‡ªå·±ç†Ÿæ‚‰çš„æ–‡æœ¬ç¼–è¾‘å™¨ç¼–è¾‘è¯¥æ–‡ä»¶ï¼Œæ·»åŠ åŠ é€Ÿå™¨åœ°å€çš„é…ç½®ã€‚å¦‚æžœä½ ä½¿ç”¨çš„å¸¦ç•Œé¢çš„å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥åœ¨Preferences... -&gt; Docker Engineæ˜¾ç¤ºçš„ç¼–è¾‘å™¨ä¸­æ·»åŠ ç›¸åº”çš„é…ç½®ã€‚ 12345678sudo mkdir -p /etc/dockersudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'&#123; "registry-mirrors": ["https://xxx.mirror.aliyuncs.com"]&#125;EOFsudo systemctl daemon-reloadsudo systemctl restart docker æ³¨æ„ï¼šå°†https://xxx.mirror.aliyuncs.comæ›¿æ¢æˆä½ è‡ªå·±çš„é•œåƒåŠ é€Ÿå™¨åœ°å€ã€‚å†æ¬¡æé†’ï¼Œé…ç½®å®ŒæˆåŽï¼Œé‡å¯dockerä¹‹åŽæ‰ä¼šç”Ÿæ•ˆã€‚ è‡³æ­¤æˆ‘ä»¬å®Œæˆäº†docker pullé•œåƒé˜¶æ®µçš„åŠ é€Ÿï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬åŠ é€Ÿåœ¨Alpineä¸­å®‰è£…è½¯ä»¶çš„è¿‡ç¨‹ã€‚ åŠ é€ŸAlpineå®‰è£…è½¯ä»¶çš„è¿‡ç¨‹åœ¨docker pullä¸‹æ¥çš„Alpineé•œåƒä¸­ï¼Œä½¿ç”¨apkå®‰è£…è½¯ä»¶æ—¶é»˜è®¤ä½¿ç”¨çš„æ˜¯å›½å¤–çš„æºï¼Œé€Ÿåº¦æ¯”è¾ƒæ…¢ã€‚è¿™é‡Œæˆ‘ä»¬æŠŠæºæ›¿æ¢ä¸ºå›½å†…çš„æºï¼Œå¯ä»¥å¤§å¤§èŠ‚çœæ—¶é—´ã€‚ä¸‹é¢ä»¥Hyperledger fabric peerçš„Dockerfileä¸ºä¾‹ï¼Œæ›¿æ¢ä¸ºé˜¿é‡Œçš„æºï¼š 12345678910111213141516171819...FROM alpine:$&#123;ALPINE_VER&#125; as peer-base# ä½¿ç”¨ä¸‹é¢è¿™è¡Œå‘½ä»¤å®Œæˆæºçš„æ›¿æ¢RUN sed -i 's/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g' /etc/apk/repositoriesRUN apk add --no-cache tzdataFROM golang:$&#123;GO_VER&#125;-alpine$&#123;ALPINE_VER&#125; as golang# ä½¿ç”¨ä¸‹é¢è¿™è¡Œå‘½ä»¤å®Œæˆæºçš„æ›¿æ¢RUN sed -i 's/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g' /etc/apk/repositoriesRUN apk add --no-cache \ bash \ gcc \ git \ make \ musl-devADD . $GOPATH/src/github.com/hyperledger/fabric... å¦å¤–ä¹Ÿå¯ä»¥æ›¿æ¢ä¸ºä¸­ç§‘å¤§çš„æºï¼šdl-cdn.alpinelinux.org/mirrors.ustc.edu.cnï¼Œæˆ–è€…æ¸…åŽçš„æºï¼šdl-cdn.alpinelinux.org/mirrors.tuna.tsinghua.edu.cnï¼Œæˆ–è€…å…¶ä»–çš„æºã€‚ æ³¨æ„ï¼šè¿™é‡Œå¯¹äºŽä½¿ç”¨multi-stageçš„Dockerfileï¼Œå¦‚æžœä¸åŒçš„stageä½¿ç”¨çš„æ˜¯ä¸åŒçš„åŸºç¡€é•œåƒï¼Œåˆ™éƒ½éœ€è¦æ›¿æ¢æºã€‚ åˆ°è¿™é‡Œï¼Œå½“dockerä½¿ç”¨Alpineä½œä¸ºåŸºç¡€é•œåƒæ—¶ï¼Œå®‰è£…ä¾èµ–è½¯ä»¶çš„è¿‡ç¨‹å°±ä¼šå¿«å¾ˆå¤šã€‚]]></content>
      <categories>
        <category>blockchain</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>hyperledger-fabric</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Macä¸Šçš„JDKå¤šç‰ˆæœ¬ç®¡ç†]]></title>
    <url>%2F2019%2F09%2Fmanage-multiple-java-versions-on-mac%2F</url>
    <content type="text"><![CDATA[æˆ‘çš„Macä¸Šå·²ç»æœ‰ä¸€ä¸ªJDK8çš„ç‰ˆæœ¬äº†ï¼Œè¿™ä¸JDK13åˆšå‘å¸ƒï¼ˆ2019-09-17ï¼‰ï¼Œæƒ³å¿«é€Ÿçš„å°ä¸€å°é²œï¼Œå°±å¾—å®‰è£…å¤šä¸ªç‰ˆæœ¬çš„JDKäº†ã€‚è¿™ä¸ªå¯¹Nodeã€Rubyã€Pythonçš„ä½¿ç”¨è€…æ¥è¯´ï¼Œå·²ç»ä¸æ˜¯ä¸ªä»€ä¹ˆæ–°é²œè¯é¢˜äº†ï¼Œä½†æ˜¯å¯¹äºŽJavaçš„ä½¿ç”¨è€…æ¥è¯´ï¼Œä¼¼ä¹Žæ²¡æœ‰é‚£ä¹ˆå¤šçš„äººå—åˆ°è¿‡å¤šç‰ˆæœ¬çš„æŠ˜ç£¨ï¼ˆæˆ‘æ˜¯é€šè¿‡GitHubä¸Šnvmã€rbenvã€pyenvã€jenvçš„Staræ•°é‡è‡†æµ‹å‡ºè¿™ä¸ªç»“è®ºçš„ :Pï¼‰ã€‚ nvm rbenv pyenv jenv å®‰è£…JDK 13é€šè¿‡Homebrew å®‰è£…JDK 13ï¼Œå¯ä»¥å…ˆé€šè¿‡brew cask info javaæŸ¥çœ‹ç›®å‰Javaçš„ç‰ˆæœ¬ï¼š 12345678java: 13,33:5b8a42f3905b406298b72d750b6919f6https://openjdk.java.net/Not installedFrom: https://github.com/Homebrew/homebrew-cask/blob/master/Casks/java.rb==&gt; NameOpenJDK Java Development Kit==&gt; Artifactsjdk-13.jdk -&gt; /Library/Java/JavaVirtualMachines/openjdk-13.jdk (Generic Artifact) è¿™é‡Œæ˜¾ç¤ºçš„æ˜¯JDK13ï¼Œæ­£å¥½æ˜¯æˆ‘æƒ³è¦å®‰è£…çš„JDKç‰ˆæœ¬ï¼Œå¦‚æžœä¸æ˜¯ä½ æƒ³è¦çš„ç‰ˆæœ¬å¯ä»¥è‡ªå·±æœç´¢ç›¸åº”çš„ Homebrew Tapã€‚æŽ¥ä¸‹æ¥ç›´æŽ¥å®‰è£…: 123456$ brew cask install java$ java -versionopenjdk version "13" 2019-09-17OpenJDK Runtime Environment (build 13+33)OpenJDK 64-Bit Server VM (build 13+33, mixed mode, sharing) è¿™å°±è¯´æ˜ŽJDK13å·²ç»å®‰è£…å¥½äº†ã€‚ ä½†æ˜¯å¦ä¸€ä¸ªé—®é¢˜æ¥äº†ï¼Œæˆ‘ç”µè„‘ä¸ŠåŽŸæ¥å®‰è£…çš„JDK8åŽ»å“ªå‘¢ï¼Ÿæˆ‘å¦‚ä½•åœ¨ä¸åŒçš„ç‰ˆæœ¬ä¸­éšæ„åˆ‡æ¢å‘¢ï¼Ÿæ¯”å¦‚åƒNodeçš„nvmï¼ŒRubyçš„rvmï¼ŒPythonçš„pyenvç­‰ã€‚ç­”æ¡ˆæ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡jenvæ¥å®žçŽ°ç›¸åŒçš„æ•ˆæžœã€‚ å®‰è£… jEnv å®‰è£… jEnv 12$ brew install jenv$ exec $SHELL -l å®‰è£…å®Œæˆä¹‹åŽï¼Œç„¶åŽæ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸã€‚ 1234567$ jenv doctor[OK] No JAVA_HOME set[ERROR] Java binary in path is not in the jenv shims.[ERROR] Please check your path, or try using /path/to/java/home is not a valid path to java installation. PATH : /usr/local/Cellar/jenv/0.5.2/libexec/libexec:/Users/xxx/.cargo/bin:/Users/xxx/.pyenv/shims:/Users/username/.pyenv:/Users/xxx/.nvm/versions/node/v8.11.4/bin:/Users/xxx/bin:/usr/local/bin:/Users/xxx/.cargo/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/Users/xxx/Documents/Projects/golang/bin[ERROR] Jenv is not loaded in your zsh[ERROR] To fix : cat eval "$(jenv init -)" &gt;&gt; /Users/xxx/.zshrc åœ¨è¿™é‡Œå¦‚æžœæŒ‰ç…§æç¤ºæ‰§è¡Œcat eval &quot;$(jenv init -)&quot; &gt;&gt; /Users/xxx/.zshrcï¼šå¯èƒ½ä¼šå¾—åˆ°å¦‚ä¸‹é”™è¯¯ï¼š 12345678910111213141516171819202122cat eval "$(jenv init -)" &gt;&gt; /Users/xxx/.zshrccat: eval: No such file or directorycat: export PATH="/Users/xxx/.jenv/shims:$&#123;PATH&#125;"export JENV_SHELL=zshexport JENV_LOADED=1unset JAVA_HOMEsource '/usr/local/Cellar/jenv/0.5.2/libexec/libexec/../completions/jenv.zsh'jenv rehash 2&gt;/dev/nulljenv() &#123; typeset command command="$1" if [ "$#" -gt 0 ]; then shift fi case "$command" in enable-plugin|rehash|shell|shell-options) eval `jenv "sh-$command" "$@"`;; *) command jenv "$command" "$@";; esac&#125;: No such file or directory ç»è¿‡ä¸€ç•ªæœç´¢ï¼Œå¾—åˆ°å¦‚ä¸‹çš„è§£å†³åŠžæ³•ï¼Œä¸»è¦å°±æ˜¯å°†catæ›¿æ¢ä¸ºechoï¼Œè¿™é‡Œæˆ‘å·²ç»ç»™jEnvæäº†ä¸ªPRï¼Œä»¥æ¶ˆé™¤è¿™ä¸ªå¹²æ‰°ã€‚ Bashç”¨æˆ· 123$ echo 'export PATH="$HOME/.jenv/bin:$PATH"' &gt;&gt; ~/.bash_profile$ echo 'eval "$(jenv init -)"' &gt;&gt; ~/.bash_profile$ exec $SHELL -l Zshç”¨æˆ· 123$ echo 'export PATH="$HOME/.jenv/bin:$PATH"' &gt;&gt; ~/.zshrc$ echo 'eval "$(jenv init -)"' &gt;&gt; ~/.zshrc$ exec $SHELL -l ç„¶åŽå†æ¬¡æ‰§è¡Œjenv doctorï¼Œå¾—åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š 12345[OK] No JAVA_HOME set[ERROR] Java binary in path is not in the jenv shims.[ERROR] Please check your path, or try using /path/to/java/home is not a valid path to java installation. PATH : /usr/local/Cellar/jenv/0.5.2/libexec/libexec:/Users/xxx/.jenv/shims:/Users/xxx/.cargo/bin:/Users/xxx/.pyenv/shims:/Users/username/.pyenv:/Users/xxx/.cargo/bin:/Users/xxx/.pyenv/shims:/Users/username/.pyenv:/Users/xxx/.nvm/versions/node/v8.11.4/bin:/Users/xxx/bin:/usr/local/bin:/Users/xxx/.cargo/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/Users/xxx/Documents/Projects/golang/bin:/Users/xxx/Documents/Projects/golang/bin[OK] Jenv is correctly loaded ä¸ºäº†èƒ½å¤Ÿæ­£ç¡®çš„è®¾ç½®JAVA_HOMEï¼Œæœ€å¥½å¼€å¯exportæ’ä»¶ï¼š 12$ jenv enable-plugin export$ exec $SHELL -l å¦‚æžœä½ æ˜¯Mavenç”¨æˆ·ï¼Œå»ºè®®å¼€å¯Mavenæ’ä»¶ï¼Œä½¿å¾—Mavenèƒ½å¤Ÿä½¿ç”¨æ­£ç¡®çš„JDKç‰ˆæœ¬ï¼š 12$ jenv enable-plugin maven$ exec $SHELL -l ç®¡ç†ä¸åŒç‰ˆæœ¬çš„JDKæ·»åŠ JDKæ·»åŠ æœ€æ–°å®‰è£…çš„JDKï¼š 1$ jenv add $(/usr/libexec/java_home) å¦‚æžœ/usr/libexec/java_homeæ‰€æŒ‡çš„ä½ç½®ä¸æ˜¯ä½ æƒ³è¦çš„ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šç›®å½•ï¼š 1$ jenv add /Library/Java/JavaVirtualMachines/jdk1.8.0_191.jdk/Contents/Home/ æŸ¥çœ‹JDKç‰ˆæœ¬æ‰§è¡Œjenv versionsï¼š 123456 system* 1.8 (set by JENV_VERSION environment variable) 1.8.0.191 13 openjdk64-13 oracle64-1.8.0.191 é»˜è®¤æƒ…å†µä¸‹ï¼ŒsystemæŒ‡çš„æ˜¯ç³»ç»Ÿä¸­å®‰è£…çš„æœ€æ–°ç‰ˆæœ¬çš„JDKã€‚ åˆ‡æ¢JDKç‰ˆæœ¬ Globalè®¾ç½®å…¨å±€æ¨¡å¼ä¸‹çš„JDKç‰ˆæœ¬ï¼š 123$ jenv global 13$ exec $SHELL -l $ java -version Localåœ¨æŸä¸ªå·¥ä½œç›®å½•ä¸‹è®¾ç½®JDKç‰ˆæœ¬ï¼Œä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª.java-versionçš„æ–‡ä»¶ï¼š 123$ jenv local 1.8$ exec $SHELL -l $ java -version Shellè®¾ç½®å½“å‰Shell sessionä¸­çš„JDKç‰ˆæœ¬ï¼š 12$ jenv shell 1.8$ java -version å‚è€ƒé“¾æŽ¥ http://www.jenv.be/ https://github.com/jenv/jenv https://emcorrales.com/blog/install-oracle-jdk-macos-homebrew]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>JDK</tag>
        <tag>jEnv</tag>
        <tag>Homebrew</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JVM æ‰§è¡Œ Java ç¨‹åºæ—¶çš„å†…å­˜åŒºåŸŸåˆ’åˆ†]]></title>
    <url>%2F2019%2F09%2Fjava-virtual-machine-runtime-memory-layout%2F</url>
    <content type="text"><![CDATA[åœ¨å­¦ä¹  Java è™šæ‹Ÿæœºï¼ˆåŽé¢ç®€ç§°ï¼šJVMï¼‰ä¸­çš„åžƒåœ¾å›žæ”¶æœºåˆ¶ï¼ˆGCï¼‰ä¹‹å‰ï¼Œå…ˆéœ€è¦äº†è§£ åœ¨ JVM ä¸­çš„ Java ç¨‹åºï¼ˆclass æ–‡ä»¶ï¼‰åŠ è½½åˆ°å†…å­˜ä¹‹åŽåˆ°åº•æ˜¯æ€Žä¹ˆå­˜çš„ã€‚åœ¨é˜…è¯»äº† JVMè§„èŒƒå’Œå‘¨å¿—æ˜Žçš„ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºï¼ˆç¬¬2ç‰ˆï¼‰ã€‹ä¹‹åŽï¼Œæ€»ç»“ä¸€ä¸‹JVMä¸­çš„å†…å­˜åˆ’åˆ†ä»¥åŠå„ä¸ªåŒºåŸŸçš„ä½œç”¨ã€‚ åœ¨JVMè§„èŒƒä¸­å®šä¹‰äº†5ç§è¿è¡Œæ—¶çš„æ•°æ®åŒºåŸŸï¼šç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰ã€Javaè™šæ‹Ÿæœºæ ˆï¼ˆJVM Stacksï¼‰ã€å †ï¼ˆHeapï¼‰ã€æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰ã€è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰ã€æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰ã€‚åœ¨å‘¨å¿—æ˜Žçš„ä¹¦ä¸­è¿˜æåˆ°äº†ç›´æŽ¥å†…å­˜ï¼ˆDirect Memoryï¼‰ï¼Œå®ƒå¹¶ä¸æ˜¯JVMè¿è¡Œæ—¶æ•°æ®åŒºåŸŸçš„ä¸€éƒ¨åˆ†ï¼Œåœ¨JVMçš„è§„èŒƒä¸­ä¹Ÿæ²¡æœ‰ç›¸å…³çš„å®šä¹‰ã€‚ä¸‹é¢åˆ†åˆ«æ¥è¯´æ˜Žå„è‡ªçš„ç”¨é€”ã€‚ ç¨‹åºè®¡æ•°å™¨ç¨‹åºè®¡æ•°å™¨ï¼Œä¹Ÿå«PC Registerã€‚å®ƒçš„ç”¨é€”å¾ˆå•ä¸€ï¼Œä½†æ˜¯å´æ˜¯å¾ˆå¤šåŠŸèƒ½çš„åŸºç¡€ã€‚å¦‚æžœçº¿ç¨‹å½“å‰æ‰§è¡Œçš„æ˜¯Nativeæ–¹æ³•ï¼Œé‚£ä¹ˆå¯„å­˜å™¨é‡Œçš„å€¼å°±æ˜¯Undefinedï¼›å¦‚æžœçº¿ç¨‹å½“å‰æ‰§è¡Œçš„æ˜¯éžNativeæ–¹æ³•ï¼Œé‚£ä¹ˆå¯„å­˜å™¨é‡Œçš„å€¼å°±æ˜¯å½“å‰æ‰§è¡Œçš„JVMå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ã€‚åƒæˆ‘ä»¬å¸¸ç”¨çš„åˆ†æ”¯ã€å¾ªçŽ¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰éƒ½ä¾èµ–äºŽå®ƒã€‚ ç”±äºŽJVMæ”¯æŒå¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼Œæ‰€ä»¥æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå„ä¸ªçº¿ç¨‹äº’ä¸å½±å“ï¼Œè¿™ç±»å†…å­˜åŒºåŸŸä¹Ÿç§°ä¹‹ä¸ºçº¿ç¨‹ç§æœ‰çš„ã€‚ Javaè™šæ‹Ÿæœºæ ˆè™šæ‹Ÿæœºæ ˆä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œéšç€ä¸€ä¸ªçº¿ç¨‹çš„åˆ›å»ºè€Œåˆ›å»ºï¼Œä¸»è¦ç”¨æ¥å­˜å‚¨æ ˆå¸§ï¼ˆStack Frameï¼‰ã€‚ä»€ä¹ˆæ˜¯æ ˆå¸§å‘¢ï¼Ÿåœ¨Javaä¸­ï¼Œæ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œæ—¶å°±ä¼šå…ˆåˆ›å»ºä¸€ä¸ªæ ˆå¸§å¹¶æ”¾å…¥è™šæ‹Ÿæœºæ ˆä¸­ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå®Œæ¯•æ—¶å†ä»Žè™šæ‹Ÿæœºæ ˆä¸­ç§»é™¤è¯¥æ ˆå¸§ã€‚å®ƒä¸»è¦ç”¨æ¥å­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æŽ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æˆ‘ä»¬å¸¸è¯´çš„å †ï¼ˆHeapï¼‰å’Œæ ˆï¼ˆStackï¼‰ä¸­çš„æ ˆï¼ŒæŒ‡çš„å°±æ˜¯è™šæ‹Ÿæœºæ ˆã€‚ åœ¨JVMè§„èŒƒä¸­å¹¶æ²¡æœ‰å¯¹è™šæ‹Ÿæœºæ ˆç©ºé—´çš„å¤§å°åšé™åˆ¶ï¼Œå¯ä»¥è®¾ç½®ä¸ºå›ºå®šå¤§å°çš„ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå¯æ‰©å±•çš„ã€‚ä½†æ˜¯åœ¨è§„èŒƒä¸­å®šä¹‰äº†ä¸¤ç§å¼‚å¸¸æƒ…å†µï¼š å¦‚æžœè®¡ç®—æ—¶è¯·æ±‚çš„æ ˆç©ºé—´å¤§äºŽè™šæ‹Ÿæœºæ ˆçš„æœ€å¤§å€¼ï¼Œåˆ™ä¼šæŠ›å‡ºStackOverflowErrorå¼‚å¸¸ï¼› å¦‚æžœè™šæ‹Ÿæœºæ ˆè®¾ç½®ä¸ºå¯æ‰©å±•çš„å¹¶ä¸”æ— æ³•å†èŽ·å–æ›´å¤šå†…å­˜æ—¶ï¼Œåˆ™ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚ å †ç›¸æ¯”è€Œè¨€ï¼Œå †åœ¨JVMç®¡ç†çš„å†…å­˜åŒºåŸŸä¸­å±žäºŽæœ€å¤§çš„ä¸€å—ï¼Œéšç€è™šæ‹Ÿæœºçš„å¯åŠ¨è€Œåˆ›å»ºï¼Œç”¨æ¥å­˜å‚¨æ‰€æœ‰çš„classå®žä¾‹å’Œæ•°ç»„ï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«è¿™ä¸€åŒºåŸŸï¼Œè¯¥åŒºåŸŸä¹Ÿæ˜¯åžƒåœ¾å›žæ”¶çš„ä¸»è¦åŒºåŸŸã€‚è™½ç„¶JVMè§„èŒƒä¸­è¯´æ‰€æœ‰çš„å¯¹è±¡å®žä¾‹éƒ½åœ¨è¯¥åŒºåŸŸåˆ†é…ç©ºé—´ï¼Œä½†æ˜¯éšç€JITæŠ€æœ¯çš„é€æ­¥å‘å±•ï¼Œè¿™ä¸€è¯´æ³•ä¹Ÿä¸ä¸¥è°¨äº†ã€‚ å †ç©ºé—´çš„å¤§å°ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå›ºå®šå¤§å°ï¼Œæˆ–è€…å¯æ‰©å±•çš„ã€‚ä½†ä¸ç®¡æ˜¯ä½•ç§æ–¹å¼ï¼Œè§„èŒƒä¸­è¿˜æ˜¯å®šä¹‰äº†ä¸€ç§å¼‚å¸¸åœºæ™¯ï¼š å¦‚æžœè®¡ç®—éœ€è¦æ›´å¤šçš„å †ç©ºé—´è€Œæ— æ³•æ»¡è¶³æ—¶ï¼Œåˆ™ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚ æ–¹æ³•åŒºæ–¹æ³•åŒºå’Œå †ä¸€æ ·ï¼Œä¹Ÿæ˜¯éšç€è™šæ‹Ÿæœºå¯åŠ¨è€Œåˆ›å»ºï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«ï¼Œä¸»è¦ç”¨æ¥å­˜å‚¨è¢«JVMåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ç­‰ä¿¡æ¯ã€‚ JVMè§„èŒƒä¸­å¹¶æœªä¸¥æ ¼è¦æ±‚è¦å¯¹è¯¥åŒºåŸŸè¿›è¡Œåžƒåœ¾å›žæ”¶ï¼Œä½†æ˜¯HotSpotè™šæ‹Ÿæœºåœ¨åžƒåœ¾å›žæ”¶çš„æ—¶å€™è¿˜æ˜¯ä¼šè€ƒè™‘è¯¥åŒºåŸŸï¼Œåœ¨åˆ†ä»£åžƒåœ¾å›žæ”¶ä¸­æ‰€è¯´çš„â€œæ°¸ä¹…ä»£â€æŒ‡çš„å°±æ˜¯æ–¹æ³•åŒºã€‚æ–¹æ³•åŒºçš„å¤§å°ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå›ºå®šå¤§å°ï¼Œæˆ–è€…å¯æ‰©å±•çš„ã€‚ä½†ä¸ç®¡æ˜¯ä½•ç§æ–¹å¼ï¼Œè§„èŒƒä¸­è¿˜æ˜¯å®šä¹‰äº†ä¸€ç§å¼‚å¸¸åœºæ™¯ï¼š å¦‚æžœè®¡ç®—éœ€è¦æ›´å¤šçš„æ–¹æ³•åŒºç©ºé—´è€Œæ— æ³•æ»¡è¶³æ—¶ï¼Œåˆ™ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚ è¿è¡Œæ—¶å¸¸é‡æ± è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºŽå­˜å‚¨ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚åœ¨Javaä¸­å¹¶ä¸è¦æ±‚å¸¸é‡ä¸€å®šåªæœ‰ç¼–è¯‘æœŸæ‰èƒ½äº§ç”Ÿï¼Œè¿è¡ŒæœŸé—´ä¹Ÿå¯èƒ½å°†æ–°çš„å¸¸é‡æ”¾å…¥æ± ä¸­ï¼Œä¾‹å¦‚Stringç±»çš„intern()æ–¹æ³•ã€‚ æ¯ä¸ªè¿è¡Œæ—¶å¸¸é‡æ± éƒ½æ˜¯éšç€ä¸€ä¸ªç±»æˆ–è€…æŽ¥å£çš„åˆ›å»ºè€Œåˆ›å»ºçš„ã€‚åœ¨è§„èŒƒä¸­å®šä¹‰äº†ä¸€ç§å¼‚å¸¸åœºæ™¯ï¼š åœ¨åˆ›å»ºä¸€ä¸ªç±»æˆ–è€…æŽ¥å£æ—¶ï¼Œå¦‚æžœè¿è¡Œæ—¶çš„å¸¸é‡æ± æ— æ³•åˆ†é…åˆ°è¶³å¤Ÿçš„ç©ºé—´æ—¶ï¼Œåˆ™ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚ æœ¬åœ°æ–¹æ³•æ ˆæœ¬åœ°æ–¹æ³•æ ˆå’Œè™šæ‹Ÿæœºæ ˆç±»ä¼¼ï¼Œä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œéšç€ä¸€ä¸ªçº¿ç¨‹çš„åˆ›å»ºè€Œåˆ›å»ºï¼Œåªä¸è¿‡è™šæ‹Ÿæœºæ ˆæ˜¯ç”¨æ¥æœåŠ¡Javaæ–¹æ³•è°ƒç”¨ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆæ˜¯ç”¨æ¥æœåŠ¡æœ¬åœ°æ–¹æ³•è°ƒç”¨çš„ã€‚ åœ¨JVMè§„èŒƒä¸­å¹¶æ²¡æœ‰å¯¹æœ¬åœ°æ–¹æ³•æ ˆç©ºé—´çš„å¤§å°åšé™åˆ¶ï¼Œå¯ä»¥è®¾ç½®ä¸ºå›ºå®šå¤§å°çš„ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå¯æ‰©å±•çš„ã€‚åœ¨è§„èŒƒä¸­ä¹Ÿå®šä¹‰äº†ä¸¤ç§å¼‚å¸¸æƒ…å†µï¼š å¦‚æžœè®¡ç®—æ—¶è¯·æ±‚çš„æ ˆç©ºé—´å¤§äºŽæœ¬åœ°æ–¹æ³•æ ˆçš„æœ€å¤§å€¼ï¼Œåˆ™ä¼šæŠ›å‡ºStackOverflowErrorå¼‚å¸¸ï¼› å¦‚æžœæœ¬åœ°æ–¹æ³•æ ˆè®¾ç½®ä¸ºå¯æ‰©å±•çš„å¹¶ä¸”æ— æ³•å†èŽ·å–æ›´å¤šå†…å­˜æ—¶ï¼Œåˆ™ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚ ç›´æŽ¥å†…å­˜*ç›´æŽ¥å†…å­˜ä¸å—è™šæ‹Ÿæœºå‚æ•°çš„æŽ§åˆ¶ï¼Œåœ¨NIOä¸­æœ‰ä¸€ç§åŸºäºŽé€šé“ï¼ˆChannelï¼‰ä¸Žç¼“å†²åŒºï¼ˆBuffer)çš„I/Oæ–¹å¼ï¼Œå®ƒå¯ä»¥é€šè¿‡Nativeæ–¹æ³•åœ¨å †å¤–åˆ†é…å†…å­˜ï¼Œç„¶åŽé€šè¿‡DirectByteBufferå¯¹è±¡æ¥å¼•ç”¨è¿™å—å†…å­˜ã€‚å› ä¸ºé¿å…äº†åœ¨Javaå †å’ŒNativeå †ä¹‹é—´æ¥å›žå¤åˆ¶æ•°æ®ï¼Œä»Žè€Œåœ¨æŸäº›åœºæ™¯ä¸­èƒ½å¤Ÿå¾—åˆ°æ€§èƒ½çš„æå‡ã€‚ä¸€æ—¦ä½¿ç”¨çš„ç›´æŽ¥å†…å­˜è¶…è¿‡äº†ç‰©ç†å†…å­˜çš„æ€»å’Œï¼Œåˆ™ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚ å‚è€ƒé“¾æŽ¥ https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.5 https://book.douban.com/subject/24722612/]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åœ¨MySQLä¸­ä½¿ç”¨LAST_INSERT_IDèŽ·å–å”¯ä¸€è‡ªå¢žåºåˆ—]]></title>
    <url>%2F2019%2F07%2Fimplement-sequence-with-mysql-last-insert-id%2F</url>
    <content type="text"><![CDATA[ä¸€èˆ¬å¦‚æžœé‡åˆ°ç”Ÿæˆå…¨å±€å”¯ä¸€çš„è‡ªå¢žIDçš„éœ€æ±‚æ—¶ï¼Œå¾€å¾€ç¬¬ä¸€ååº”éƒ½æ˜¯ç›´æŽ¥åˆ©ç”¨æ•°æ®çš„Sequenceå¯¹è±¡ï¼Œç®€å•ï¼Œç›´æŽ¥äº†å½“ã€‚ä½†æ˜¯MySQLååä¸æ”¯æŒSequenceå¯¹è±¡ï¼Œé‚£æˆ‘ä»¬è¯¥å¦‚ä½•æ˜¯å¥½å‘¢ï¼Ÿ ä»€ä¹ˆæ˜¯SequenceSequenceä¹Ÿå«åšåºåˆ—ï¼Œä¸€èˆ¬ç”¨åšè¡¨çš„ä¸»é”®ï¼Œæˆ–è€…ä¸€äº›é¡¹ç›®çš„ç¼–å·ç­‰ã€‚ä¸€èˆ¬å…·æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š å…¨è¡¨å”¯ä¸€ è‡ªå¢ž ä¸ä¸€å®šä¸¥æ ¼è¿žç»­ï¼ˆä¸­é—´ç”±äºŽäº‹åŠ¡çš„å›žæ»šå¯èƒ½ä¼šå‡ºçŽ°æ´žï¼Œæ¯”å¦‚1ï¼Œ2ï¼Œ3ï¼Œ5ï¼Œ6ï¼‰ åœ¨å¸¸è§çš„å‡ ç§æ•°æ®åº“ä¸­ï¼ŒOracleã€SQL Serveréƒ½å†…ç½®æœ‰Sequenceå¯¹è±¡ï¼Œå…·ä½“ç”¨æ³•å°±ä¸åœ¨æ­¤èµ˜è¿°äº†ã€‚åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸‹å¦‚ä½•åœ¨åŽŸç”Ÿä¸æ”¯æŒSequenceçš„MySQLï¼ˆç›®å‰æœ€æ–°çš„å¤§ç‰ˆæœ¬ä¸º8.0ï¼‰ä¸­æ¨¡æ‹Ÿå‡ºSequenceçš„æ•ˆæžœã€‚ å¦‚ä½•åœ¨MySQLä¸­æ¨¡æ‹ŸSequenceMySQLä¸­çš„auto_incrementä¸€èˆ¬æ˜¯ç”¨æ¥ç”Ÿæˆè¡¨çš„ä¸»é”®ï¼Œæœ¬èº«èƒ½å¤Ÿç”Ÿæˆè‡ªå¢žçš„å”¯ä¸€IDï¼Œä½†æ˜¯ä¸€å¼ è¡¨åªèƒ½æœ‰ä¸€ä¸ªåˆ—å¸¦æœ‰auto_incrementå±žæ€§ã€‚åœ¨å®žé™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä¸æ­¢ä¸€ç§åºåˆ—å·ï¼Œæ¯”å¦‚é¡¹ç›®ç¼–å·ï¼ˆPROJ-001ï¼ŒPROJ-002â€¦ï¼‰ã€å‘ç¥¨ç¼–å·ï¼ˆINV-0001ï¼ŒINV-0002â€¦ï¼‰ï¼Œè®¢å•ç¼–å·ï¼ˆORD-0001ï¼ŒORD-0002â€¦ï¼‰ç­‰ç­‰ï¼Œä¸‹é¢å°†é€šè¿‡auto_incrementå’ŒLAST_INSERT_IDç›¸ç»“åˆå®žçŽ°è¯¥åŠŸèƒ½ã€‚ LAST_INSERT_IDå‡½æ•°è¯¥å‡½æ•°æœ‰ä¸¤ç§å½¢å¼ï¼šLAST_INSERT_ID(), LAST_INSERT_ID(expr)ã€‚æ— å‚çš„å½¢å¼ä¼šè¿”å›žæœ€è¿‘ä¸€æ¬¡æ‰§è¡ŒINSERTè¯­å¥æ—¶auto_incrementçš„å€¼ï¼›å¸¦exprçš„å½¢å¼ä¼šè¿”å›žè¡¨è¾¾å¼çš„å€¼ï¼Œå¹¶ä¸”è¯¥å€¼ä¼šè¢«è®°ä½ï¼Œåœ¨ä¸‹ä¸€æ¬¡è°ƒç”¨LAST_INSERT_ID()æ—¶ä¹Ÿè¿”å›žè¯¥å€¼ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚ é¦–å…ˆåˆ›å»ºä¸€å¼ è¡¨ï¼š 1234CREATE TABLE user ( id INT AUTO_INCREMENT PRIMARY KEY, name VARCHAR(50) NOT NULL); ç„¶åŽæ’å…¥ä¸¤æ¡æ•°æ®ï¼š 1234INSERT INTO user(name) VALUES(&apos;å¼ ä¸‰&apos;);INSERT INTO user(name) VALUES(&apos;æŽå››&apos;);SELECT LAST_INSERT_ID(); æ­¤æ—¶å¾—åˆ°çš„ç»“æžœæ˜¯2ã€‚ æ³¨æ„ï¼šå¦‚æžœæ˜¯ä¸€æ¡è¯­å¥æ’å…¥å¤šæ¡å€¼ï¼Œåˆ™è¿”å›žçš„æ˜¯æ’å…¥ç¬¬ä¸€æ¡æ—¶è‡ªåŠ¨ç”Ÿæˆçš„IDï¼Œè€Œä¸æ˜¯æœ€åŽä¸€æ¡çš„ã€‚ æ¯”å¦‚æˆ‘ä»¬å†æ’å…¥ä¸‰æ¡æ•°æ®ï¼Œä¸è¿‡æ¢ä¸ªå†™æ³•ï¼š 123456INSERT INTO user(name) VALUES(&apos;çŽ‹äº”&apos;), (&apos;èµµå…­&apos;), (&apos;éƒ‘ä¸ƒ&apos;);SELECT LAST_INSERT_ID(); æ­¤æ—¶å¾—åˆ°çš„ç»“æžœæ˜¯3ï¼Œè€Œä¸æ˜¯5ã€‚ èŽ·å–è‡ªå¢žåºåˆ—åœ¨å®žé™…çš„é¡¹ç›®ä¸­æˆ‘ä»¬å®Œå…¨å¯ä»¥æ¢ä¸ªæ–¹å¼ï¼Œé¿å…ä¸Šé¢ðŸ‘†çš„æƒ…å†µï¼Œä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œä½•å¿…æ²¡æœ‰å›°éš¾ï¼Œåˆ¶é€ å›°éš¾ä¸ºéš¾è‡ªå·±å‘¢ï¼ŸæŽ¥ç€çœ‹ä¸‹ä¸€ä¸ªæ›´åŠ é€šç”¨çš„ä¾‹å­ã€‚ åˆ›å»ºå¦ä¸€å¼ è¡¨å¹¶åˆå§‹åŒ–æ•°æ®ï¼š 12345678CREATE TABLE sequence ( id INT AUTO_INCREMENT PRIMARY KEY, seq_type VARCHAR(50) NOT NULL, year INT NOT NULL, current_val BIGINT NOT NULL);INSERT INTO sequence(seq_type, year, current_val) VALUES(&apos;INVOICE&apos;, 2019, 0); æ¯æ¬¡åœ¨èŽ·å–current_valä¹‹å‰ï¼Œå…ˆé€šè¿‡LAST_INSERT_ID(current_val + 1)æ›´æ–°ï¼š 12345UPDATE sequence SET current_val = LAST_INSERT_ID(current_val + 1)WHERE seq_type = &apos;INVOICE&apos; AND year = 2019;SELECT LAST_INSERT_ID(); è¿™æ ·æ¯æ¬¡éƒ½èƒ½èŽ·å–è‡ªå¢žä¹‹åŽçš„å€¼äº†ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¾‹å¤–çš„æƒ…å†µã€‚æ¯”å¦‚ä¸¤ä¸ªäººåŒæ—¶åœ¨èŽ·å–æ–°çš„å€¼ï¼ŒAå…ˆåšäº†updateæ“ä½œï¼Œç„¶åŽBä¹Ÿåšäº†updateæ“ä½œï¼Œç„¶åŽAçš„æ“ä½œç”±äºŽæŸç§åŽŸå› å›žæ»šäº†ï¼ŒBçš„æ“ä½œæˆåŠŸäº†ï¼Œæ­¤æ—¶åºåˆ—ä¸­é—´å°±ä¼šå‡ºçŽ°ä¸€ä¸ªæ´žã€‚è™½ç„¶ä¸æ˜¯ä¸¥æ ¼è¿žç»­çš„ï¼Œä½†æ˜¯åœ¨å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå·²ç»æ»¡è¶³è¦æ±‚äº†ã€‚ è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æžœseq_typeæˆ–è€…yearæ¡ä»¶ä¸æ»¡è¶³ï¼Œé‚£ä¹ˆè¿™é‡Œçš„SELECT LAST_INSERT_ID();å°±ä¼šå§‹ç»ˆè¿”å›žä¸Šä¸€æ¬¡çš„å€¼ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ„æƒ³ä¸åˆ°çš„çš„é”™è¯¯ã€‚ LAST_INSERT_ID() vs. MAX()LAST_INSERT_ID()æ˜¯ä»¥æ•°æ®åº“è¿žæŽ¥ä¸ºåŸºç¡€çš„ï¼Œå³ä½¿æœ‰å¤šä¸ªäººåŒæ—¶é€šè¿‡å¤šä¸ªè¿žæŽ¥èŽ·å–Sequenceä¹Ÿä¸ä¼šæœ‰é—®é¢˜ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯ä¼šèŽ·å–åˆ°å±žäºŽä»–è‡ªå·±çš„åºåˆ—å·ï¼Œä¸ç”¨æ‹…å¿ƒä¼šå—åˆ°å…¶ä»–å®¢æˆ·ç«¯çš„å½±å“ï¼Œæˆ–è€…å½±å“å…¶ä»–å®¢æˆ·ç«¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒMAX()ææ€•å°±ä¸èƒ½æ­£å¸¸å·¥ä½œäº†ã€‚ å‚è€ƒé“¾æŽ¥ https://www.percona.com/community-blog/2018/10/12/generating-identifiers-auto_increment-sequence/ https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id http://www.mysqltutorial.org/mysql-last_insert_id.aspx]]></content>
      <categories>
        <category>database</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>%2F404%2F404.html</url>
    <content type="text"><![CDATA[]]></content>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽæˆ‘]]></title>
    <url>%2Fabout%2Findex.html</url>
    <content type="text"><![CDATA[ç®€åŽ†æŒç»­æ›´æ–°ä¸­â€¦ Hongwei Peng(å½­æ´ªä¼Ÿ)ï¼Œpengisgood(at)gmail(dot)comFull-stack developer | Open source contributor | Lifelong learner ç®€åŽ† LinkedIn: https://www.linkedin.com/in/max-hongwei-peng Stackoverflow: https://stackoverflow.com/story/maxpeng å‡ºç‰ˆçš„ä¹¦ç±AngularJSæ·±åº¦å‰–æžä¸Žæœ€ä½³å®žè·µ å¼€æºè´¡çŒ®ä¸‹é¢æ˜¯æˆ‘è´¡çŒ®è¿‡ä»£ç æˆ–æ–‡æ¡£çš„å¼€æºé¡¹ç›®åˆ—è¡¨ï¼š 2020https://github.com/ipfs/go-ipfs-api https://github.com/ipfs-shipyard/ipfs-primer https://github.com/hyperledger/fabric https://github.com/hyperledger/fabric-docs-i18n 2019https://github.com/justauth/JustAuth https://github.com/jenv/jenv 2018https://github.com/rootsongjc/kubernetes-vagrant-centos-cluster https://github.com/hyperledger/cello 2017https://github.com/OpenLMIS/openlmis-stockmanagement https://github.com/OpenLMIS/openlmis-referencedata https://github.com/OpenLMIS/openlmis-ui-layout https://github.com/OpenLMIS/openlmis-stockmanagement-ui https://github.com/OpenLMIS/openlmis-ui-components https://github.com/OpenLMIS/openlmis-requisition-refUI https://github.com/OpenLMIS/dev-ui 2014https://github.com/jingyanjiaoliu/angular-guide-zh https://github.com/sbt/website]]></content>
  </entry>
  <entry>
    <title><![CDATA[categories]]></title>
    <url>%2Fcategories%2Findex.html</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[tags]]></title>
    <url>%2Ftags%2Findex.html</url>
    <content type="text"></content>
  </entry>
</search>
