<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Coding Life</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://codinglife.tech/"/>
  <updated>2019-09-24T08:25:06.477Z</updated>
  <id>https://codinglife.tech/</id>
  
  <author>
    <name>Max Peng</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Macä¸Šçš„JDKå¤šç‰ˆæœ¬ç®¡ç†</title>
    <link href="https://codinglife.tech/2019/09/manage-multiple-java-versions-on-mac/"/>
    <id>https://codinglife.tech/2019/09/manage-multiple-java-versions-on-mac/</id>
    <published>2019-09-24T07:27:36.000Z</published>
    <updated>2019-09-24T08:25:06.477Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/jenv.png" alt="jEnv"><br>æˆ‘çš„Macä¸Šå·²ç»æœ‰ä¸€ä¸ªJDK8çš„ç‰ˆæœ¬äº†ï¼Œè¿™ä¸<a href="http://openjdk.java.net/projects/jdk/13/" target="_blank" rel="noopener">JDK13</a>åˆšå‘å¸ƒï¼ˆ2019-09-17ï¼‰ï¼Œæƒ³å¿«é€Ÿçš„å°ä¸€å°é²œï¼Œå°±å¾—å®‰è£…å¤šä¸ªç‰ˆæœ¬çš„JDKäº†ã€‚è¿™ä¸ªå¯¹Nodeã€Rubyã€Pythonçš„ä½¿ç”¨è€…æ¥è¯´ï¼Œå·²ç»ä¸æ˜¯ä¸ªä»€ä¹ˆæ–°é²œè¯é¢˜äº†ï¼Œä½†æ˜¯å¯¹äºJavaçš„ä½¿ç”¨è€…æ¥è¯´ï¼Œä¼¼ä¹æ²¡æœ‰é‚£ä¹ˆå¤šçš„äººå—åˆ°è¿‡å¤šç‰ˆæœ¬çš„æŠ˜ç£¨ï¼ˆæˆ‘æ˜¯é€šè¿‡GitHubä¸Š<a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener"><code>nvm</code></a>ã€<a href="https://github.com/rbenv/rbenv" target="_blank" rel="noopener"><code>rbenv</code></a>ã€<a href="https://github.com/pyenv/pyenv" target="_blank" rel="noopener"><code>pyenv</code></a>ã€<a href="https://github.com/jenv/jenv" target="_blank" rel="noopener"><code>jenv</code></a>çš„Staræ•°é‡è‡†æµ‹å‡ºè¿™ä¸ªç»“è®ºçš„ :Pï¼‰ã€‚</p><a id="more"></a><ul><li>nvm<iframe src="https://ghbtns.com/github-btn.html?user=nvm-sh&repo=nvm&type=star&count=true" frameborder="0" scrolling="0" width="200px" height="20px" style="vertical-align:middle"></iframe></li><li>rbenv<iframe src="https://ghbtns.com/github-btn.html?user=rbenv&repo=rbenv&type=star&count=true" frameborder="0" scrolling="0" width="200px" height="20px" style="vertical-align:middle"></iframe></li><li>pyenv<iframe src="https://ghbtns.com/github-btn.html?user=pyenv&repo=pyenv&type=star&count=true" frameborder="0" scrolling="0" width="200px" height="20px" style="vertical-align:middle"></iframe></li><li>jenv<iframe src="https://ghbtns.com/github-btn.html?user=jenv&repo=jenv&type=star&count=true" frameborder="0" scrolling="0" width="200px" height="20px" style="vertical-align:middle"></iframe></li></ul><h2 id="å®‰è£…JDK-13"><a href="#å®‰è£…JDK-13" class="headerlink" title="å®‰è£…JDK 13"></a>å®‰è£…JDK 13</h2><p>é€šè¿‡Homebrew å®‰è£…JDK 13ï¼Œå¯ä»¥å…ˆé€šè¿‡<code>brew cask info java</code>æŸ¥çœ‹ç›®å‰Javaçš„ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java: 13,33:5b8a42f3905b406298b72d750b6919f6</span><br><span class="line">https://openjdk.java.net/</span><br><span class="line">Not installed</span><br><span class="line">From: https://github.com/Homebrew/homebrew-cask/blob/master/Casks/java.rb</span><br><span class="line">==&gt; Name</span><br><span class="line">OpenJDK Java Development Kit</span><br><span class="line">==&gt; Artifacts</span><br><span class="line">jdk-13.jdk -&gt; /Library/Java/JavaVirtualMachines/openjdk-13.jdk (Generic Artifact)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ˜¾ç¤ºçš„æ˜¯JDK13ï¼Œæ­£å¥½æ˜¯æˆ‘æƒ³è¦å®‰è£…çš„JDKç‰ˆæœ¬ï¼Œå¦‚æœä¸æ˜¯ä½ æƒ³è¦çš„ç‰ˆæœ¬å¯ä»¥è‡ªå·±æœç´¢ç›¸åº”çš„ Homebrew Tapã€‚æ¥ä¸‹æ¥ç›´æ¥å®‰è£…:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ brew cask install java</span><br><span class="line">$ java -version</span><br><span class="line"></span><br><span class="line">openjdk version <span class="string">"13"</span> 2019-09-17</span><br><span class="line">OpenJDK Runtime Environment (build 13+33)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 13+33, mixed mode, sharing)</span><br></pre></td></tr></table></figure><p>è¿™å°±è¯´æ˜JDK13å·²ç»å®‰è£…å¥½äº†ã€‚</p><p>ä½†æ˜¯å¦ä¸€ä¸ªé—®é¢˜æ¥äº†ï¼Œæˆ‘ç”µè„‘ä¸ŠåŸæ¥å®‰è£…çš„JDK8å»å“ªå‘¢ï¼Ÿæˆ‘å¦‚ä½•åœ¨ä¸åŒçš„ç‰ˆæœ¬ä¸­éšæ„åˆ‡æ¢å‘¢ï¼Ÿæ¯”å¦‚åƒNodeçš„<code>nvm</code>ï¼ŒRubyçš„<code>rvm</code>ï¼ŒPythonçš„<code>pyenv</code>ç­‰ã€‚ç­”æ¡ˆæ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>jenv</code>æ¥å®ç°ç›¸åŒçš„æ•ˆæœã€‚</p><h2 id="å®‰è£…-jEnv"><a href="#å®‰è£…-jEnv" class="headerlink" title="å®‰è£… jEnv"></a>å®‰è£… jEnv</h2><ol><li>å®‰è£… jEnv<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ brew install jenv</span><br><span class="line">$ <span class="built_in">exec</span> <span class="variable">$SHELL</span> -l</span><br></pre></td></tr></table></figure></li></ol><p>å®‰è£…å®Œæˆä¹‹åï¼Œç„¶åæ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ jenv doctor</span><br><span class="line">[OK]No JAVA_HOME <span class="built_in">set</span></span><br><span class="line">[ERROR]Java binary <span class="keyword">in</span> path is not <span class="keyword">in</span> the jenv shims.</span><br><span class="line">[ERROR]Please check your path, or try using /path/to/java/home is not a valid path to java installation.</span><br><span class="line">PATH : /usr/<span class="built_in">local</span>/Cellar/jenv/0.5.2/libexec/libexec:/Users/xxx/.cargo/bin:/Users/xxx/.pyenv/shims:/Users/username/.pyenv:/Users/xxx/.nvm/versions/node/v8.11.4/bin:/Users/xxx/bin:/usr/<span class="built_in">local</span>/bin:/Users/xxx/.cargo/bin:/usr/<span class="built_in">local</span>/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/<span class="built_in">local</span>/go/bin:/Users/xxx/Documents/Projects/golang/bin</span><br><span class="line">[ERROR]Jenv is not loaded <span class="keyword">in</span> your zsh</span><br><span class="line">[ERROR]To fix : cat <span class="built_in">eval</span> <span class="string">"<span class="variable">$(jenv init -)</span>"</span> &gt;&gt; /Users/xxx/.zshrc</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œå¦‚æœæŒ‰ç…§æç¤ºæ‰§è¡Œ<code>cat eval &quot;$(jenv init -)&quot; &gt;&gt; /Users/xxx/.zshrc</code>ï¼šå¯èƒ½ä¼šå¾—åˆ°å¦‚ä¸‹é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">cat <span class="built_in">eval</span> <span class="string">"<span class="variable">$(jenv init -)</span>"</span> &gt;&gt; /Users/xxx/.zshrc</span><br><span class="line">cat: <span class="built_in">eval</span>: No such file or directory</span><br><span class="line">cat: <span class="built_in">export</span> PATH=<span class="string">"/Users/xxx/.jenv/shims:<span class="variable">$&#123;PATH&#125;</span>"</span></span><br><span class="line"><span class="built_in">export</span> JENV_SHELL=zsh</span><br><span class="line"><span class="built_in">export</span> JENV_LOADED=1</span><br><span class="line"><span class="built_in">unset</span> JAVA_HOME</span><br><span class="line"><span class="built_in">source</span> <span class="string">'/usr/local/Cellar/jenv/0.5.2/libexec/libexec/../completions/jenv.zsh'</span></span><br><span class="line">jenv <span class="built_in">rehash</span> 2&gt;/dev/null</span><br><span class="line"><span class="function"><span class="title">jenv</span></span>() &#123;</span><br><span class="line">  <span class="built_in">typeset</span> <span class="built_in">command</span></span><br><span class="line">  <span class="built_in">command</span>=<span class="string">"<span class="variable">$1</span>"</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="string">"<span class="variable">$#</span>"</span> -gt 0 ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">shift</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">case</span> <span class="string">"<span class="variable">$command</span>"</span> <span class="keyword">in</span></span><br><span class="line">  <span class="built_in">enable</span>-plugin|<span class="built_in">rehash</span>|shell|shell-options)</span><br><span class="line">    <span class="built_in">eval</span> `jenv <span class="string">"sh-<span class="variable">$command</span>"</span> <span class="string">"<span class="variable">$@</span>"</span>`;;</span><br><span class="line">  *)</span><br><span class="line">    <span class="built_in">command</span> jenv <span class="string">"<span class="variable">$command</span>"</span> <span class="string">"<span class="variable">$@</span>"</span>;;</span><br><span class="line">  <span class="keyword">esac</span></span><br><span class="line">&#125;: No such file or directory</span><br></pre></td></tr></table></figure><p>ç»è¿‡ä¸€ç•ªæœç´¢ï¼Œå¾—åˆ°å¦‚ä¸‹çš„è§£å†³åŠæ³•ï¼Œä¸»è¦å°±æ˜¯å°†<code>cat</code>æ›¿æ¢ä¸º<code>echo</code>ï¼Œè¿™é‡Œæˆ‘å·²ç»ç»™jEnvæäº†ä¸ª<a href="https://github.com/jenv/jenv/pull/265" target="_blank" rel="noopener">PR</a>ï¼Œä»¥æ¶ˆé™¤è¿™ä¸ªå¹²æ‰°ã€‚</p><ul><li><p>Bashç”¨æˆ·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">'export PATH="$HOME/.jenv/bin:$PATH"'</span> &gt;&gt; ~/.bash_profile</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">'eval "$(jenv init -)"'</span> &gt;&gt; ~/.bash_profile</span><br><span class="line">$ <span class="built_in">exec</span> <span class="variable">$SHELL</span> -l</span><br></pre></td></tr></table></figure></li><li><p>Zshç”¨æˆ·</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">'export PATH="$HOME/.jenv/bin:$PATH"'</span> &gt;&gt; ~/.zshrc</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">'eval "$(jenv init -)"'</span> &gt;&gt; ~/.zshrc</span><br><span class="line">$ <span class="built_in">exec</span> <span class="variable">$SHELL</span> -l</span><br></pre></td></tr></table></figure></li></ul><p>ç„¶åå†æ¬¡æ‰§è¡Œ<code>jenv doctor</code>ï¼Œå¾—åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[OK]No JAVA_HOME <span class="built_in">set</span></span><br><span class="line">[ERROR]Java binary <span class="keyword">in</span> path is not <span class="keyword">in</span> the jenv shims.</span><br><span class="line">[ERROR]Please check your path, or try using /path/to/java/home is not a valid path to java installation.</span><br><span class="line">PATH : /usr/<span class="built_in">local</span>/Cellar/jenv/0.5.2/libexec/libexec:/Users/xxx/.jenv/shims:/Users/xxx/.cargo/bin:/Users/xxx/.pyenv/shims:/Users/username/.pyenv:/Users/xxx/.cargo/bin:/Users/xxx/.pyenv/shims:/Users/username/.pyenv:/Users/xxx/.nvm/versions/node/v8.11.4/bin:/Users/xxx/bin:/usr/<span class="built_in">local</span>/bin:/Users/xxx/.cargo/bin:/usr/<span class="built_in">local</span>/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/<span class="built_in">local</span>/go/bin:/Users/xxx/Documents/Projects/golang/bin:/Users/xxx/Documents/Projects/golang/bin</span><br><span class="line">[OK]Jenv is correctly loaded</span><br></pre></td></tr></table></figure><p>ä¸ºäº†èƒ½å¤Ÿæ­£ç¡®çš„è®¾ç½®<code>JAVA_HOME</code>ï¼Œæœ€å¥½å¼€å¯<code>export</code>æ’ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ jenv <span class="built_in">enable</span>-plugin <span class="built_in">export</span></span><br><span class="line">$ <span class="built_in">exec</span> <span class="variable">$SHELL</span> -l</span><br></pre></td></tr></table></figure><h2 id="ç®¡ç†ä¸åŒç‰ˆæœ¬çš„JDK"><a href="#ç®¡ç†ä¸åŒç‰ˆæœ¬çš„JDK" class="headerlink" title="ç®¡ç†ä¸åŒç‰ˆæœ¬çš„JDK"></a>ç®¡ç†ä¸åŒç‰ˆæœ¬çš„JDK</h2><h3 id="æ·»åŠ JDK"><a href="#æ·»åŠ JDK" class="headerlink" title="æ·»åŠ JDK"></a>æ·»åŠ JDK</h3><p>æ·»åŠ æœ€æ–°å®‰è£…çš„JDKï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ jenv add $(/usr/libexec/java_home)</span><br></pre></td></tr></table></figure><p>å¦‚æœ<code>/usr/libexec/java_home</code>æ‰€æŒ‡çš„ä½ç½®ä¸æ˜¯ä½ æƒ³è¦çš„ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ jenv add /Library/Java/JavaVirtualMachines/jdk1.8.0_191.jdk/Contents/Home/</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹JDKç‰ˆæœ¬"><a href="#æŸ¥çœ‹JDKç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹JDKç‰ˆæœ¬"></a>æŸ¥çœ‹JDKç‰ˆæœ¬</h3><p>æ‰§è¡Œ<code>jenv versions</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  system</span><br><span class="line">* 1.8 (<span class="built_in">set</span> by JENV_VERSION environment variable)</span><br><span class="line">  1.8.0.191</span><br><span class="line">  13</span><br><span class="line">  openjdk64-13</span><br><span class="line">  oracle64-1.8.0.191</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒsystemæŒ‡çš„æ˜¯ç³»ç»Ÿä¸­å®‰è£…çš„æœ€æ–°ç‰ˆæœ¬çš„JDKã€‚</p><h3 id="åˆ‡æ¢JDKç‰ˆæœ¬"><a href="#åˆ‡æ¢JDKç‰ˆæœ¬" class="headerlink" title="åˆ‡æ¢JDKç‰ˆæœ¬"></a>åˆ‡æ¢JDKç‰ˆæœ¬</h3><ul><li><p>Global<br>è®¾ç½®å…¨å±€æ¨¡å¼ä¸‹çš„JDKç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jenv global 13</span><br><span class="line">$ <span class="built_in">exec</span> <span class="variable">$SHELL</span> -l </span><br><span class="line">$ java -version</span><br></pre></td></tr></table></figure></li><li><p>Local<br>åœ¨æŸä¸ªå·¥ä½œç›®å½•ä¸‹è®¾ç½®JDKç‰ˆæœ¬ï¼Œä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>.java-version</code>çš„æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jenv <span class="built_in">local</span> 1.8</span><br><span class="line">$ <span class="built_in">exec</span> <span class="variable">$SHELL</span> -l </span><br><span class="line">$ java -version</span><br></pre></td></tr></table></figure></li><li><p>Shell<br>è®¾ç½®å½“å‰Shell sessionä¸­çš„JDKç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ jenv shell 1.8</span><br><span class="line">$ java -version</span><br></pre></td></tr></table></figure></li></ul><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><blockquote><ul><li><a href="http://www.jenv.be/" target="_blank" rel="noopener">http://www.jenv.be/</a></li><li><a href="https://github.com/jenv/jenv" target="_blank" rel="noopener">https://github.com/jenv/jenv</a></li><li><a href="https://emcorrales.com/blog/install-oracle-jdk-macos-homebrew" target="_blank" rel="noopener">https://emcorrales.com/blog/install-oracle-jdk-macos-homebrew</a></li></ul></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/jenv.png&quot; alt=&quot;jEnv&quot;&gt;&lt;br&gt;æˆ‘çš„Macä¸Šå·²ç»æœ‰ä¸€ä¸ªJDK8çš„ç‰ˆæœ¬äº†ï¼Œè¿™ä¸&lt;a href=&quot;http://openjdk.java.net/projects/jdk/13/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JDK13&lt;/a&gt;åˆšå‘å¸ƒï¼ˆ2019-09-17ï¼‰ï¼Œæƒ³å¿«é€Ÿçš„å°ä¸€å°é²œï¼Œå°±å¾—å®‰è£…å¤šä¸ªç‰ˆæœ¬çš„JDKäº†ã€‚è¿™ä¸ªå¯¹Nodeã€Rubyã€Pythonçš„ä½¿ç”¨è€…æ¥è¯´ï¼Œå·²ç»ä¸æ˜¯ä¸ªä»€ä¹ˆæ–°é²œè¯é¢˜äº†ï¼Œä½†æ˜¯å¯¹äºJavaçš„ä½¿ç”¨è€…æ¥è¯´ï¼Œä¼¼ä¹æ²¡æœ‰é‚£ä¹ˆå¤šçš„äººå—åˆ°è¿‡å¤šç‰ˆæœ¬çš„æŠ˜ç£¨ï¼ˆæˆ‘æ˜¯é€šè¿‡GitHubä¸Š&lt;a href=&quot;https://github.com/nvm-sh/nvm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;code&gt;nvm&lt;/code&gt;&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/rbenv/rbenv&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;code&gt;rbenv&lt;/code&gt;&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/pyenv/pyenv&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;code&gt;pyenv&lt;/code&gt;&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/jenv/jenv&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;code&gt;jenv&lt;/code&gt;&lt;/a&gt;çš„Staræ•°é‡è‡†æµ‹å‡ºè¿™ä¸ªç»“è®ºçš„ :Pï¼‰ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="https://codinglife.tech/categories/Java/"/>
    
    
      <category term="jEnv" scheme="https://codinglife.tech/tags/jEnv/"/>
    
      <category term="Homebrew" scheme="https://codinglife.tech/tags/Homebrew/"/>
    
      <category term="JDK" scheme="https://codinglife.tech/tags/JDK/"/>
    
  </entry>
  
  <entry>
    <title>JVM æ‰§è¡Œ Java ç¨‹åºæ—¶çš„å†…å­˜åŒºåŸŸåˆ’åˆ†</title>
    <link href="https://codinglife.tech/2019/09/java-virtual-machine-runtime-memory-layout/"/>
    <id>https://codinglife.tech/2019/09/java-virtual-machine-runtime-memory-layout/</id>
    <published>2019-09-17T02:28:03.000Z</published>
    <updated>2019-09-17T09:12:56.300Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/jvm-memory-layout.png" alt="JVM Memory Layout"></p><p>åœ¨å­¦ä¹  Java è™šæ‹Ÿæœºï¼ˆåé¢ç®€ç§°ï¼š<code>JVM</code>ï¼‰ä¸­çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼ˆGCï¼‰ä¹‹å‰ï¼Œå…ˆéœ€è¦äº†è§£ åœ¨ JVM ä¸­çš„ Java ç¨‹åºï¼ˆclass æ–‡ä»¶ï¼‰åŠ è½½åˆ°å†…å­˜ä¹‹ååˆ°åº•æ˜¯æ€ä¹ˆå­˜çš„ã€‚åœ¨é˜…è¯»äº† <a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.5" target="_blank" rel="noopener"><strong>JVMè§„èŒƒ</strong></a>å’Œå‘¨å¿—æ˜çš„<a href="https://book.douban.com/subject/24722612/" target="_blank" rel="noopener"><strong>ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºï¼ˆç¬¬2ç‰ˆï¼‰ã€‹</strong></a>ä¹‹åï¼Œæ€»ç»“ä¸€ä¸‹JVMä¸­çš„å†…å­˜åˆ’åˆ†ä»¥åŠå„ä¸ªåŒºåŸŸçš„ä½œç”¨ã€‚</p><a id="more"></a><p>åœ¨JVMè§„èŒƒä¸­å®šä¹‰äº†5ç§è¿è¡Œæ—¶çš„æ•°æ®åŒºåŸŸï¼šç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰ã€Javaè™šæ‹Ÿæœºæ ˆï¼ˆJVM Stacksï¼‰ã€å †ï¼ˆHeapï¼‰ã€æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰ã€è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰ã€æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰ã€‚åœ¨å‘¨å¿—æ˜çš„ä¹¦ä¸­è¿˜æåˆ°äº†ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰ï¼Œå®ƒå¹¶ä¸æ˜¯JVMè¿è¡Œæ—¶æ•°æ®åŒºåŸŸçš„ä¸€éƒ¨åˆ†ï¼Œåœ¨JVMçš„è§„èŒƒä¸­ä¹Ÿæ²¡æœ‰ç›¸å…³çš„å®šä¹‰ã€‚ä¸‹é¢åˆ†åˆ«æ¥è¯´æ˜å„è‡ªçš„ç”¨é€”ã€‚</p><h2 id="ç¨‹åºè®¡æ•°å™¨"><a href="#ç¨‹åºè®¡æ•°å™¨" class="headerlink" title="ç¨‹åºè®¡æ•°å™¨"></a>ç¨‹åºè®¡æ•°å™¨</h2><p>ç¨‹åºè®¡æ•°å™¨ï¼Œä¹Ÿå«PC Registerã€‚å®ƒçš„ç”¨é€”å¾ˆå•ä¸€ï¼Œä½†æ˜¯å´æ˜¯å¾ˆå¤šåŠŸèƒ½çš„åŸºç¡€ã€‚å¦‚æœçº¿ç¨‹å½“å‰æ‰§è¡Œçš„æ˜¯Nativeæ–¹æ³•ï¼Œé‚£ä¹ˆå¯„å­˜å™¨é‡Œçš„å€¼å°±æ˜¯Undefinedï¼›å¦‚æœçº¿ç¨‹å½“å‰æ‰§è¡Œçš„æ˜¯éNativeæ–¹æ³•ï¼Œé‚£ä¹ˆå¯„å­˜å™¨é‡Œçš„å€¼å°±æ˜¯å½“å‰æ‰§è¡Œçš„JVMå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ã€‚åƒæˆ‘ä»¬å¸¸ç”¨çš„åˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰éƒ½ä¾èµ–äºå®ƒã€‚</p><p>ç”±äºJVMæ”¯æŒå¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼Œæ‰€ä»¥æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå„ä¸ªçº¿ç¨‹äº’ä¸å½±å“ï¼Œè¿™ç±»å†…å­˜åŒºåŸŸä¹Ÿç§°ä¹‹ä¸º<strong>çº¿ç¨‹ç§æœ‰</strong>çš„ã€‚</p><h2 id="Javaè™šæ‹Ÿæœºæ ˆ"><a href="#Javaè™šæ‹Ÿæœºæ ˆ" class="headerlink" title="Javaè™šæ‹Ÿæœºæ ˆ"></a>Javaè™šæ‹Ÿæœºæ ˆ</h2><p>è™šæ‹Ÿæœºæ ˆä¹Ÿæ˜¯<strong>çº¿ç¨‹ç§æœ‰</strong>çš„ï¼Œéšç€ä¸€ä¸ªçº¿ç¨‹çš„åˆ›å»ºè€Œåˆ›å»ºï¼Œä¸»è¦ç”¨æ¥å­˜å‚¨æ ˆå¸§ï¼ˆStack Frameï¼‰ã€‚ä»€ä¹ˆæ˜¯æ ˆå¸§å‘¢ï¼Ÿåœ¨Javaä¸­ï¼Œæ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œæ—¶å°±ä¼šå…ˆåˆ›å»ºä¸€ä¸ªæ ˆå¸§å¹¶æ”¾å…¥è™šæ‹Ÿæœºæ ˆä¸­ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå®Œæ¯•æ—¶å†ä»è™šæ‹Ÿæœºæ ˆä¸­ç§»é™¤è¯¥æ ˆå¸§ã€‚å®ƒä¸»è¦ç”¨æ¥å­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æˆ‘ä»¬å¸¸è¯´çš„å †ï¼ˆHeapï¼‰å’Œæ ˆï¼ˆStackï¼‰ä¸­çš„æ ˆï¼ŒæŒ‡çš„å°±æ˜¯è™šæ‹Ÿæœºæ ˆã€‚</p><p>åœ¨JVMè§„èŒƒä¸­å¹¶æ²¡æœ‰å¯¹è™šæ‹Ÿæœºæ ˆç©ºé—´çš„å¤§å°åšé™åˆ¶ï¼Œå¯ä»¥è®¾ç½®ä¸ºå›ºå®šå¤§å°çš„ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå¯æ‰©å±•çš„ã€‚ä½†æ˜¯åœ¨è§„èŒƒä¸­å®šä¹‰äº†ä¸¤ç§å¼‚å¸¸æƒ…å†µï¼š</p><ul><li>å¦‚æœè®¡ç®—æ—¶è¯·æ±‚çš„æ ˆç©ºé—´å¤§äºè™šæ‹Ÿæœºæ ˆçš„æœ€å¤§å€¼ï¼Œåˆ™ä¼šæŠ›å‡º<code>StackOverflowError</code>å¼‚å¸¸ï¼›</li><li>å¦‚æœè™šæ‹Ÿæœºæ ˆè®¾ç½®ä¸ºå¯æ‰©å±•çš„å¹¶ä¸”æ— æ³•å†è·å–æ›´å¤šå†…å­˜æ—¶ï¼Œåˆ™ä¼šæŠ›å‡º<code>OutOfMemoryError</code>å¼‚å¸¸ã€‚</li></ul><h2 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h2><p>ç›¸æ¯”è€Œè¨€ï¼Œå †åœ¨JVMç®¡ç†çš„å†…å­˜åŒºåŸŸä¸­å±äºæœ€å¤§çš„ä¸€å—ï¼Œéšç€è™šæ‹Ÿæœºçš„å¯åŠ¨è€Œåˆ›å»ºï¼Œç”¨æ¥å­˜å‚¨æ‰€æœ‰çš„classå®ä¾‹å’Œæ•°ç»„ï¼Œæ‰€æœ‰<strong>çº¿ç¨‹å…±äº«</strong>è¿™ä¸€åŒºåŸŸï¼Œè¯¥åŒºåŸŸä¹Ÿæ˜¯åƒåœ¾å›æ”¶çš„ä¸»è¦åŒºåŸŸã€‚è™½ç„¶JVMè§„èŒƒä¸­è¯´æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½åœ¨è¯¥åŒºåŸŸåˆ†é…ç©ºé—´ï¼Œä½†æ˜¯éšç€JITæŠ€æœ¯çš„é€æ­¥å‘å±•ï¼Œè¿™ä¸€è¯´æ³•ä¹Ÿä¸ä¸¥è°¨äº†ã€‚</p><p>å †ç©ºé—´çš„å¤§å°ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå›ºå®šå¤§å°ï¼Œæˆ–è€…å¯æ‰©å±•çš„ã€‚ä½†ä¸ç®¡æ˜¯ä½•ç§æ–¹å¼ï¼Œè§„èŒƒä¸­è¿˜æ˜¯å®šä¹‰äº†ä¸€ç§å¼‚å¸¸åœºæ™¯ï¼š</p><ul><li>å¦‚æœè®¡ç®—éœ€è¦æ›´å¤šçš„å †ç©ºé—´è€Œæ— æ³•æ»¡è¶³æ—¶ï¼Œåˆ™ä¼šæŠ›å‡º<code>OutOfMemoryError</code>å¼‚å¸¸ã€‚</li></ul><h2 id="æ–¹æ³•åŒº"><a href="#æ–¹æ³•åŒº" class="headerlink" title="æ–¹æ³•åŒº"></a>æ–¹æ³•åŒº</h2><p>æ–¹æ³•åŒºå’Œå †ä¸€æ ·ï¼Œä¹Ÿæ˜¯éšç€è™šæ‹Ÿæœºå¯åŠ¨è€Œåˆ›å»ºï¼Œæ‰€æœ‰<strong>çº¿ç¨‹å…±äº«</strong>ï¼Œä¸»è¦ç”¨æ¥å­˜å‚¨è¢«JVMåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ç­‰ä¿¡æ¯ã€‚</p><p>JVMè§„èŒƒä¸­å¹¶æœªä¸¥æ ¼è¦æ±‚è¦å¯¹è¯¥åŒºåŸŸè¿›è¡Œåƒåœ¾å›æ”¶ï¼Œä½†æ˜¯HotSpotè™šæ‹Ÿæœºåœ¨åƒåœ¾å›æ”¶çš„æ—¶å€™è¿˜æ˜¯ä¼šè€ƒè™‘è¯¥åŒºåŸŸï¼Œåœ¨åˆ†ä»£åƒåœ¾å›æ”¶ä¸­æ‰€è¯´çš„â€œ<strong>æ°¸ä¹…ä»£</strong>â€æŒ‡çš„å°±æ˜¯æ–¹æ³•åŒºã€‚æ–¹æ³•åŒºçš„å¤§å°ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå›ºå®šå¤§å°ï¼Œæˆ–è€…å¯æ‰©å±•çš„ã€‚ä½†ä¸ç®¡æ˜¯ä½•ç§æ–¹å¼ï¼Œè§„èŒƒä¸­è¿˜æ˜¯å®šä¹‰äº†ä¸€ç§å¼‚å¸¸åœºæ™¯ï¼š</p><ul><li>å¦‚æœè®¡ç®—éœ€è¦æ›´å¤šçš„æ–¹æ³•åŒºç©ºé—´è€Œæ— æ³•æ»¡è¶³æ—¶ï¼Œåˆ™ä¼šæŠ›å‡º<code>OutOfMemoryError</code>å¼‚å¸¸ã€‚</li></ul><h2 id="è¿è¡Œæ—¶å¸¸é‡æ± "><a href="#è¿è¡Œæ—¶å¸¸é‡æ± " class="headerlink" title="è¿è¡Œæ—¶å¸¸é‡æ± "></a>è¿è¡Œæ—¶å¸¸é‡æ± </h2><p>è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜å‚¨ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚åœ¨Javaä¸­å¹¶ä¸è¦æ±‚å¸¸é‡ä¸€å®šåªæœ‰ç¼–è¯‘æœŸæ‰èƒ½äº§ç”Ÿï¼Œè¿è¡ŒæœŸé—´ä¹Ÿå¯èƒ½å°†æ–°çš„å¸¸é‡æ”¾å…¥æ± ä¸­ï¼Œä¾‹å¦‚<code>String</code>ç±»çš„<code>intern()</code>æ–¹æ³•ã€‚</p><p>æ¯ä¸ªè¿è¡Œæ—¶å¸¸é‡æ± éƒ½æ˜¯éšç€ä¸€ä¸ªç±»æˆ–è€…æ¥å£çš„åˆ›å»ºè€Œåˆ›å»ºçš„ã€‚åœ¨è§„èŒƒä¸­å®šä¹‰äº†ä¸€ç§å¼‚å¸¸åœºæ™¯ï¼š</p><ul><li>åœ¨åˆ›å»ºä¸€ä¸ªç±»æˆ–è€…æ¥å£æ—¶ï¼Œå¦‚æœè¿è¡Œæ—¶çš„å¸¸é‡æ± æ— æ³•åˆ†é…åˆ°è¶³å¤Ÿçš„ç©ºé—´æ—¶ï¼Œåˆ™ä¼šæŠ›å‡º<code>OutOfMemoryError</code>å¼‚å¸¸ã€‚</li></ul><h2 id="æœ¬åœ°æ–¹æ³•æ ˆ"><a href="#æœ¬åœ°æ–¹æ³•æ ˆ" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆ"></a>æœ¬åœ°æ–¹æ³•æ ˆ</h2><p>æœ¬åœ°æ–¹æ³•æ ˆå’Œè™šæ‹Ÿæœºæ ˆç±»ä¼¼ï¼Œä¹Ÿæ˜¯<strong>çº¿ç¨‹ç§æœ‰</strong>çš„ï¼Œéšç€ä¸€ä¸ªçº¿ç¨‹çš„åˆ›å»ºè€Œåˆ›å»ºï¼Œåªä¸è¿‡è™šæ‹Ÿæœºæ ˆæ˜¯ç”¨æ¥æœåŠ¡Javaæ–¹æ³•è°ƒç”¨ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆæ˜¯ç”¨æ¥æœåŠ¡æœ¬åœ°æ–¹æ³•è°ƒç”¨çš„ã€‚</p><p>åœ¨JVMè§„èŒƒä¸­å¹¶æ²¡æœ‰å¯¹æœ¬åœ°æ–¹æ³•æ ˆç©ºé—´çš„å¤§å°åšé™åˆ¶ï¼Œå¯ä»¥è®¾ç½®ä¸ºå›ºå®šå¤§å°çš„ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå¯æ‰©å±•çš„ã€‚åœ¨è§„èŒƒä¸­ä¹Ÿå®šä¹‰äº†ä¸¤ç§å¼‚å¸¸æƒ…å†µï¼š</p><ul><li>å¦‚æœè®¡ç®—æ—¶è¯·æ±‚çš„æ ˆç©ºé—´å¤§äºæœ¬åœ°æ–¹æ³•æ ˆçš„æœ€å¤§å€¼ï¼Œåˆ™ä¼šæŠ›å‡º<code>StackOverflowError</code>å¼‚å¸¸ï¼›</li><li>å¦‚æœæœ¬åœ°æ–¹æ³•æ ˆè®¾ç½®ä¸ºå¯æ‰©å±•çš„å¹¶ä¸”æ— æ³•å†è·å–æ›´å¤šå†…å­˜æ—¶ï¼Œåˆ™ä¼šæŠ›å‡º<code>OutOfMemoryError</code>å¼‚å¸¸ã€‚</li></ul><h2 id="ç›´æ¥å†…å­˜"><a href="#ç›´æ¥å†…å­˜" class="headerlink" title="ç›´æ¥å†…å­˜*"></a>ç›´æ¥å†…å­˜<sup>*</sup></h2><p>ç›´æ¥å†…å­˜ä¸å—è™šæ‹Ÿæœºå‚æ•°çš„æ§åˆ¶ï¼Œåœ¨NIOä¸­æœ‰ä¸€ç§åŸºäºé€šé“ï¼ˆChannelï¼‰ä¸ç¼“å†²åŒºï¼ˆBuffer)çš„I/Oæ–¹å¼ï¼Œå®ƒå¯ä»¥é€šè¿‡Nativeæ–¹æ³•åœ¨å †å¤–åˆ†é…å†…å­˜ï¼Œç„¶åé€šè¿‡DirectByteBufferå¯¹è±¡æ¥å¼•ç”¨è¿™å—å†…å­˜ã€‚å› ä¸ºé¿å…äº†åœ¨Javaå †å’ŒNativeå †ä¹‹é—´æ¥å›å¤åˆ¶æ•°æ®ï¼Œä»è€Œåœ¨æŸäº›åœºæ™¯ä¸­èƒ½å¤Ÿå¾—åˆ°æ€§èƒ½çš„æå‡ã€‚ä¸€æ—¦ä½¿ç”¨çš„ç›´æ¥å†…å­˜è¶…è¿‡äº†ç‰©ç†å†…å­˜çš„æ€»å’Œï¼Œåˆ™ä¼šæŠ›å‡º<code>OutOfMemoryError</code>å¼‚å¸¸ã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><blockquote><ul><li><a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.5" target="_blank" rel="noopener">https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.5</a></li><li><a href="https://book.douban.com/subject/24722612/" target="_blank" rel="noopener">https://book.douban.com/subject/24722612/</a></li></ul></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/jvm-memory-layout.png&quot; alt=&quot;JVM Memory Layout&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å­¦ä¹  Java è™šæ‹Ÿæœºï¼ˆåé¢ç®€ç§°ï¼š&lt;code&gt;JVM&lt;/code&gt;ï¼‰ä¸­çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼ˆGCï¼‰ä¹‹å‰ï¼Œå…ˆéœ€è¦äº†è§£ åœ¨ JVM ä¸­çš„ Java ç¨‹åºï¼ˆclass æ–‡ä»¶ï¼‰åŠ è½½åˆ°å†…å­˜ä¹‹ååˆ°åº•æ˜¯æ€ä¹ˆå­˜çš„ã€‚åœ¨é˜…è¯»äº† &lt;a href=&quot;https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.5&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;JVMè§„èŒƒ&lt;/strong&gt;&lt;/a&gt;å’Œå‘¨å¿—æ˜çš„&lt;a href=&quot;https://book.douban.com/subject/24722612/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºï¼ˆç¬¬2ç‰ˆï¼‰ã€‹&lt;/strong&gt;&lt;/a&gt;ä¹‹åï¼Œæ€»ç»“ä¸€ä¸‹JVMä¸­çš„å†…å­˜åˆ’åˆ†ä»¥åŠå„ä¸ªåŒºåŸŸçš„ä½œç”¨ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="https://codinglife.tech/categories/Java/"/>
    
    
      <category term="JVM" scheme="https://codinglife.tech/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨MySQLä¸­ä½¿ç”¨LAST_INSERT_IDè·å–å”¯ä¸€è‡ªå¢åºåˆ—</title>
    <link href="https://codinglife.tech/2019/07/implement-sequence-with-mysql-last-insert-id/"/>
    <id>https://codinglife.tech/2019/07/implement-sequence-with-mysql-last-insert-id/</id>
    <published>2019-07-15T12:03:02.000Z</published>
    <updated>2019-07-16T07:07:21.312Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€èˆ¬å¦‚æœé‡åˆ°ç”Ÿæˆå…¨å±€å”¯ä¸€çš„è‡ªå¢IDçš„éœ€æ±‚æ—¶ï¼Œå¾€å¾€ç¬¬ä¸€ååº”éƒ½æ˜¯ç›´æ¥åˆ©ç”¨æ•°æ®çš„Sequenceå¯¹è±¡ï¼Œç®€å•ï¼Œç›´æ¥äº†å½“ã€‚ä½†æ˜¯MySQLååä¸æ”¯æŒSequenceå¯¹è±¡ï¼Œé‚£æˆ‘ä»¬è¯¥å¦‚ä½•æ˜¯å¥½å‘¢ï¼Ÿ</p><h2 id="ä»€ä¹ˆæ˜¯Sequence"><a href="#ä»€ä¹ˆæ˜¯Sequence" class="headerlink" title="ä»€ä¹ˆæ˜¯Sequence"></a>ä»€ä¹ˆæ˜¯Sequence</h2><p>Sequenceä¹Ÿå«åšåºåˆ—ï¼Œä¸€èˆ¬ç”¨åšè¡¨çš„ä¸»é”®ï¼Œæˆ–è€…ä¸€äº›é¡¹ç›®çš„ç¼–å·ç­‰ã€‚ä¸€èˆ¬å…·æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p><ul><li>å…¨è¡¨å”¯ä¸€</li><li>è‡ªå¢</li><li>ä¸ä¸€å®šä¸¥æ ¼è¿ç»­ï¼ˆä¸­é—´ç”±äºäº‹åŠ¡çš„å›æ»šå¯èƒ½ä¼šå‡ºç°<code>æ´</code>ï¼Œæ¯”å¦‚1ï¼Œ2ï¼Œ3ï¼Œ5ï¼Œ6ï¼‰</li></ul><a id="more"></a><p>åœ¨å¸¸è§çš„å‡ ç§æ•°æ®åº“ä¸­ï¼ŒOracleã€SQL Serveréƒ½å†…ç½®æœ‰Sequenceå¯¹è±¡ï¼Œå…·ä½“ç”¨æ³•å°±ä¸åœ¨æ­¤èµ˜è¿°äº†ã€‚åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸‹å¦‚ä½•åœ¨åŸç”Ÿä¸æ”¯æŒSequenceçš„MySQLï¼ˆç›®å‰æœ€æ–°çš„å¤§ç‰ˆæœ¬ä¸º8.0ï¼‰ä¸­æ¨¡æ‹Ÿå‡ºSequenceçš„æ•ˆæœã€‚</p><h2 id="å¦‚ä½•åœ¨MySQLä¸­æ¨¡æ‹ŸSequence"><a href="#å¦‚ä½•åœ¨MySQLä¸­æ¨¡æ‹ŸSequence" class="headerlink" title="å¦‚ä½•åœ¨MySQLä¸­æ¨¡æ‹ŸSequence"></a>å¦‚ä½•åœ¨MySQLä¸­æ¨¡æ‹ŸSequence</h2><p>MySQLä¸­çš„<code>auto_increment</code>ä¸€èˆ¬æ˜¯ç”¨æ¥ç”Ÿæˆè¡¨çš„ä¸»é”®ï¼Œæœ¬èº«èƒ½å¤Ÿç”Ÿæˆè‡ªå¢çš„å”¯ä¸€IDï¼Œä½†æ˜¯ä¸€å¼ è¡¨åªèƒ½æœ‰ä¸€ä¸ªåˆ—å¸¦æœ‰<code>auto_increment</code>å±æ€§ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä¸æ­¢ä¸€ç§åºåˆ—å·ï¼Œæ¯”å¦‚é¡¹ç›®ç¼–å·ï¼ˆPROJ-001ï¼ŒPROJ-002â€¦ï¼‰ã€å‘ç¥¨ç¼–å·ï¼ˆINV-0001ï¼ŒINV-0002â€¦ï¼‰ï¼Œè®¢å•ç¼–å·ï¼ˆORD-0001ï¼ŒORD-0002â€¦ï¼‰ç­‰ç­‰ï¼Œä¸‹é¢å°†é€šè¿‡<code>auto_increment</code>å’Œ<code>LAST_INSERT_ID</code>ç›¸ç»“åˆå®ç°è¯¥åŠŸèƒ½ã€‚</p><h3 id="LAST-INSERT-IDå‡½æ•°"><a href="#LAST-INSERT-IDå‡½æ•°" class="headerlink" title="LAST_INSERT_IDå‡½æ•°"></a>LAST_INSERT_IDå‡½æ•°</h3><p>è¯¥å‡½æ•°æœ‰ä¸¤ç§å½¢å¼ï¼š<a href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id" target="_blank" rel="noopener"><code>LAST_INSERT_ID()</code></a>, <a href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id" target="_blank" rel="noopener"><code>LAST_INSERT_ID(expr)</code></a>ã€‚æ— å‚çš„å½¢å¼ä¼šè¿”å›æœ€è¿‘ä¸€æ¬¡æ‰§è¡Œ<code>INSERT</code>è¯­å¥æ—¶<code>auto_increment</code>çš„å€¼ï¼›å¸¦<code>expr</code>çš„å½¢å¼ä¼šè¿”å›è¡¨è¾¾å¼çš„å€¼ï¼Œå¹¶ä¸”è¯¥å€¼ä¼šè¢«è®°ä½ï¼Œåœ¨ä¸‹ä¸€æ¬¡è°ƒç”¨<code>LAST_INSERT_ID()</code>æ—¶ä¹Ÿè¿”å›è¯¥å€¼ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚</p><p>é¦–å…ˆåˆ›å»ºä¸€å¼ è¡¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE user (</span><br><span class="line">    id INT AUTO_INCREMENT PRIMARY KEY,</span><br><span class="line">    name VARCHAR(50) NOT NULL</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>ç„¶åæ’å…¥ä¸¤æ¡æ•°æ®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO user(name) VALUES(&apos;å¼ ä¸‰&apos;);</span><br><span class="line">INSERT INTO user(name) VALUES(&apos;æå››&apos;);</span><br><span class="line"></span><br><span class="line">SELECT LAST_INSERT_ID();</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¾—åˆ°çš„ç»“æœæ˜¯2ã€‚</p><p><strong>æ³¨æ„ï¼š</strong>å¦‚æœæ˜¯ä¸€æ¡è¯­å¥æ’å…¥å¤šæ¡å€¼ï¼Œåˆ™è¿”å›çš„æ˜¯æ’å…¥ç¬¬ä¸€æ¡æ—¶è‡ªåŠ¨ç”Ÿæˆçš„IDï¼Œè€Œä¸æ˜¯æœ€åä¸€æ¡çš„ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬å†æ’å…¥ä¸‰æ¡æ•°æ®ï¼Œä¸è¿‡æ¢ä¸ªå†™æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO user(name) </span><br><span class="line">VALUES(&apos;ç‹äº”&apos;),</span><br><span class="line">      (&apos;èµµå…­&apos;),</span><br><span class="line">      (&apos;éƒ‘ä¸ƒ&apos;);</span><br><span class="line"></span><br><span class="line">SELECT LAST_INSERT_ID();</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¾—åˆ°çš„ç»“æœæ˜¯3ï¼Œè€Œ<strong>ä¸æ˜¯</strong>5ã€‚</p><h3 id="è·å–è‡ªå¢åºåˆ—"><a href="#è·å–è‡ªå¢åºåˆ—" class="headerlink" title="è·å–è‡ªå¢åºåˆ—"></a>è·å–è‡ªå¢åºåˆ—</h3><p>åœ¨å®é™…çš„é¡¹ç›®ä¸­æˆ‘ä»¬å®Œå…¨å¯ä»¥æ¢ä¸ªæ–¹å¼ï¼Œé¿å…ä¸Šé¢ğŸ‘†çš„æƒ…å†µï¼Œä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œä½•å¿…æ²¡æœ‰å›°éš¾ï¼Œåˆ¶é€ å›°éš¾ä¸ºéš¾è‡ªå·±å‘¢ï¼Ÿæ¥ç€çœ‹ä¸‹ä¸€ä¸ªæ›´åŠ é€šç”¨çš„ä¾‹å­ã€‚</p><p>åˆ›å»ºå¦ä¸€å¼ è¡¨å¹¶åˆå§‹åŒ–æ•°æ®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE sequence (</span><br><span class="line">    id INT AUTO_INCREMENT PRIMARY KEY,</span><br><span class="line">    seq_type VARCHAR(50) NOT NULL,</span><br><span class="line">    year INT NOT NULL,</span><br><span class="line">    current_val BIGINT NOT NULL</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO sequence(seq_type, year, current_val) VALUES(&apos;INVOICE&apos;, 2019, 0);</span><br></pre></td></tr></table></figure><p>æ¯æ¬¡åœ¨è·å–<code>current_val</code>ä¹‹å‰ï¼Œå…ˆé€šè¿‡<code>LAST_INSERT_ID(current_val + 1)</code>æ›´æ–°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UPDATE sequence </span><br><span class="line">SET current_val = LAST_INSERT_ID(current_val + 1)</span><br><span class="line">WHERE seq_type = &apos;INVOICE&apos; AND year = 2019;</span><br><span class="line"></span><br><span class="line">SELECT LAST_INSERT_ID();</span><br></pre></td></tr></table></figure><p>è¿™æ ·æ¯æ¬¡éƒ½èƒ½è·å–è‡ªå¢ä¹‹åçš„å€¼äº†ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¾‹å¤–çš„æƒ…å†µã€‚æ¯”å¦‚ä¸¤ä¸ªäººåŒæ—¶åœ¨è·å–æ–°çš„å€¼ï¼ŒAå…ˆåšäº†updateæ“ä½œï¼Œç„¶åBä¹Ÿåšäº†updateæ“ä½œï¼Œç„¶åAçš„æ“ä½œç”±äºæŸç§åŸå› å›æ»šäº†ï¼ŒBçš„æ“ä½œæˆåŠŸäº†ï¼Œæ­¤æ—¶åºåˆ—ä¸­é—´å°±ä¼šå‡ºç°ä¸€ä¸ª<code>æ´</code>ã€‚è™½ç„¶ä¸æ˜¯ä¸¥æ ¼è¿ç»­çš„ï¼Œä½†æ˜¯åœ¨å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå·²ç»æ»¡è¶³è¦æ±‚äº†ã€‚</p><p><strong>è¿˜éœ€è¦æ³¨æ„çš„æ˜¯</strong>ï¼Œå¦‚æœ<code>seq_type</code>æˆ–è€…<code>year</code>æ¡ä»¶ä¸æ»¡è¶³ï¼Œé‚£ä¹ˆè¿™é‡Œçš„<code>SELECT LAST_INSERT_ID();</code>å°±ä¼šå§‹ç»ˆè¿”å›ä¸Šä¸€æ¬¡çš„å€¼ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ„æƒ³ä¸åˆ°çš„çš„é”™è¯¯ã€‚</p><h2 id="LAST-INSERT-ID-vs-MAX"><a href="#LAST-INSERT-ID-vs-MAX" class="headerlink" title="LAST_INSERT_ID() vs. MAX()"></a>LAST_INSERT_ID() vs. MAX()</h2><p><code>LAST_INSERT_ID()</code>æ˜¯ä»¥æ•°æ®åº“è¿æ¥ä¸ºåŸºç¡€çš„ï¼Œå³ä½¿æœ‰å¤šä¸ªäººåŒæ—¶é€šè¿‡å¤šä¸ªè¿æ¥è·å–Sequenceä¹Ÿä¸ä¼šæœ‰é—®é¢˜ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯ä¼šè·å–åˆ°å±äºä»–è‡ªå·±çš„åºåˆ—å·ï¼Œä¸ç”¨æ‹…å¿ƒä¼šå—åˆ°å…¶ä»–å®¢æˆ·ç«¯çš„å½±å“ï¼Œæˆ–è€…å½±å“å…¶ä»–å®¢æˆ·ç«¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>MAX()</code>ææ€•å°±ä¸èƒ½æ­£å¸¸å·¥ä½œäº†ã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><blockquote><ul><li><a href="https://www.percona.com/community-blog/2018/10/12/generating-identifiers-auto_increment-sequence/" target="_blank" rel="noopener">https://www.percona.com/community-blog/2018/10/12/generating-identifiers-auto_increment-sequence/</a></li><li><a href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id</a></li><li><a href="http://www.mysqltutorial.org/mysql-last_insert_id.aspx" target="_blank" rel="noopener">http://www.mysqltutorial.org/mysql-last_insert_id.aspx</a></li></ul></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€èˆ¬å¦‚æœé‡åˆ°ç”Ÿæˆå…¨å±€å”¯ä¸€çš„è‡ªå¢IDçš„éœ€æ±‚æ—¶ï¼Œå¾€å¾€ç¬¬ä¸€ååº”éƒ½æ˜¯ç›´æ¥åˆ©ç”¨æ•°æ®çš„Sequenceå¯¹è±¡ï¼Œç®€å•ï¼Œç›´æ¥äº†å½“ã€‚ä½†æ˜¯MySQLååä¸æ”¯æŒSequenceå¯¹è±¡ï¼Œé‚£æˆ‘ä»¬è¯¥å¦‚ä½•æ˜¯å¥½å‘¢ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯Sequence&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯Sequence&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯Sequence&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯Sequence&lt;/h2&gt;&lt;p&gt;Sequenceä¹Ÿå«åšåºåˆ—ï¼Œä¸€èˆ¬ç”¨åšè¡¨çš„ä¸»é”®ï¼Œæˆ–è€…ä¸€äº›é¡¹ç›®çš„ç¼–å·ç­‰ã€‚ä¸€èˆ¬å…·æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…¨è¡¨å”¯ä¸€&lt;/li&gt;
&lt;li&gt;è‡ªå¢&lt;/li&gt;
&lt;li&gt;ä¸ä¸€å®šä¸¥æ ¼è¿ç»­ï¼ˆä¸­é—´ç”±äºäº‹åŠ¡çš„å›æ»šå¯èƒ½ä¼šå‡ºç°&lt;code&gt;æ´&lt;/code&gt;ï¼Œæ¯”å¦‚1ï¼Œ2ï¼Œ3ï¼Œ5ï¼Œ6ï¼‰&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="database" scheme="https://codinglife.tech/categories/database/"/>
    
    
      <category term="mysql" scheme="https://codinglife.tech/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://codinglife.tech/2019/07/hello-world/"/>
    <id>https://codinglife.tech/2019/07/hello-world/</id>
    <published>2019-07-11T03:18:39.829Z</published>
    <updated>2019-07-15T15:06:17.694Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><a id="more"></a><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;Create-a-new-post&quot;&gt;&lt;a href=&quot;#Create-a-new-post&quot; class=&quot;headerlink&quot; title=&quot;Create a new post&quot;&gt;&lt;/a&gt;Create a new post&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo new &lt;span class=&quot;string&quot;&gt;&quot;My New Post&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/writing.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Writing&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
